(()=>{var __webpack_modules__={901:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.getKeyIndexes=t.hasFlag=t.exists=t.list=void 0;const n=r(s(5904));t.list=Object.keys(n.default);const i={};t.list.forEach((e=>{i[e]=n.default[e].flags.reduce((function(e,t){e[t]=true;return e}),{})}));function exists(e){return Boolean(n.default[e])}t.exists=exists;function hasFlag(e,t){if(!i[e]){throw new Error("Unknown command "+e)}return Boolean(i[e][t])}t.hasFlag=hasFlag;function getKeyIndexes(e,t,s){const r=n.default[e];if(!r){throw new Error("Unknown command "+e)}if(!Array.isArray(t)){throw new Error("Expect args to be an array")}const i=[];const o=Boolean(s&&s.parseExternalKey);const takeDynamicKeys=(e,t)=>{const s=[];const r=Number(e[t]);for(let e=0;e<r;e++){s.push(e+t+1)}return s};const takeKeyAfterToken=(e,t,s)=>{for(let r=t;r<e.length-1;r+=1){if(String(e[r]).toLowerCase()===s.toLowerCase()){return r+1}}return null};switch(e){case"zunionstore":case"zinterstore":case"zdiffstore":i.push(0,...takeDynamicKeys(t,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":i.push(...takeDynamicKeys(t,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{i.push(...takeDynamicKeys(t,0));break}case"georadius":{i.push(0);const e=takeKeyAfterToken(t,5,"STORE");if(e)i.push(e);const s=takeKeyAfterToken(t,5,"STOREDIST");if(s)i.push(s);break}case"georadiusbymember":{i.push(0);const e=takeKeyAfterToken(t,4,"STORE");if(e)i.push(e);const s=takeKeyAfterToken(t,4,"STOREDIST");if(s)i.push(s);break}case"sort":case"sort_ro":i.push(0);for(let e=1;e<t.length-1;e++){let s=t[e];if(typeof s!=="string"){continue}const r=s.toUpperCase();if(r==="GET"){e+=1;s=t[e];if(s!=="#"){if(o){i.push([e,getExternalKeyNameLength(s)])}else{i.push(e)}}}else if(r==="BY"){e+=1;if(o){i.push([e,getExternalKeyNameLength(t[e])])}else{i.push(e)}}else if(r==="STORE"){e+=1;i.push(e)}}break;case"migrate":if(t[2]===""){for(let e=5;e<t.length-1;e++){const s=t[e];if(typeof s==="string"&&s.toUpperCase()==="KEYS"){for(let s=e+1;s<t.length;s++){i.push(s)}break}}}else{i.push(2)}break;case"xreadgroup":case"xread":for(let s=e==="xread"?0:3;s<t.length-1;s++){if(String(t[s]).toUpperCase()==="STREAMS"){for(let e=s+1;e<=s+(t.length-1-s)/2;e++){i.push(e)}break}}break;default:if(r.step>0){const e=r.keyStart-1;const s=r.keyStop>0?r.keyStop:t.length+r.keyStop+1;for(let t=e;t<s;t+=r.step){i.push(t)}}break}return i}t.getKeyIndexes=getKeyIndexes;function getExternalKeyNameLength(e){if(typeof e!=="string"){e=String(e)}const t=e.indexOf("->");return t===-1?e.length:t}},9840:e=>{var t=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];var s=function toUTF8Array(e){var t;var s=0;var r=0;var n=[];var i=e.length;for(;s<i;s++){t=e.charCodeAt(s);if(t<128){n[r++]=t}else if(t<2048){n[r++]=t>>6|192;n[r++]=t&63|128}else if((t&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320){t=65536+((t&1023)<<10)+(e.charCodeAt(++s)&1023);n[r++]=t>>18|240;n[r++]=t>>12&63|128;n[r++]=t>>6&63|128;n[r++]=t&63|128}else{n[r++]=t>>12|224;n[r++]=t>>6&63|128;n[r++]=t&63|128}}return n};var r=e.exports=function generate(e){var r;var n=0;var i=-1;var o=0;var a=0;var l=typeof e==="string"?s(e):e;var c=l.length;while(n<c){r=l[n++];if(i===-1){if(r===123){i=n}}else if(r!==125){a=t[(r^a>>8)&255]^a<<8}else if(n-1!==i){return a&16383}o=t[(r^o>>8)&255]^o<<8}return o&16383};e.exports.generateMulti=function generateMulti(e){var t=1;var s=e.length;var n=r(e[0]);while(t<s){if(r(e[t++])!==n)return-1}return n}},372:(e,t,s)=>{t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage=localstorage();t.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}const s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0;let n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if(e==="%%"){return}r++;if(e==="%c"){n=r}}));t.splice(n,0,s)}t.log=console.debug||console.log||(()=>{});function save(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(e){}}function load(){let e;try{e=t.storage.getItem("debug")}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function localstorage(){try{return localStorage}catch(e){}}e.exports=s(9855)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},9855:(e,t,s)=>{function setup(e){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=s(2769);createDebug.destroy=destroy;Object.keys(e).forEach((t=>{createDebug[t]=e[t]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(e){let t=0;for(let s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s);t|=0}return createDebug.colors[Math.abs(t)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(e){let t;let s=null;let r;let n;function debug(...e){if(!debug.enabled){return}const s=debug;const r=Number(new Date);const n=r-(t||r);s.diff=n;s.prev=t;s.curr=r;t=r;e[0]=createDebug.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,r)=>{if(t==="%%"){return"%"}i++;const n=createDebug.formatters[r];if(typeof n==="function"){const r=e[i];t=n.call(s,r);e.splice(i,1);i--}return t}));createDebug.formatArgs.call(s,e);const o=s.log||createDebug.log;o.apply(s,e)}debug.namespace=e;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(e);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(s!==null){return s}if(r!==createDebug.namespaces){r=createDebug.namespaces;n=createDebug.enabled(e)}return n},set:e=>{s=e}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(e,t){const s=createDebug(this.namespace+(typeof t==="undefined"?":":t)+e);s.log=this.log;return s}function enable(e){createDebug.save(e);createDebug.namespaces=e;createDebug.names=[];createDebug.skips=[];let t;const s=(typeof e==="string"?e:"").split(/[\s,]+/);const r=s.length;for(t=0;t<r;t++){if(!s[t]){continue}e=s[t].replace(/\*/g,".*?");if(e[0]==="-"){createDebug.skips.push(new RegExp("^"+e.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+e+"$"))}}}function disable(){const e=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((e=>"-"+e))].join(",");createDebug.enable("");return e}function enabled(e){if(e[e.length-1]==="*"){return true}let t;let s;for(t=0,s=createDebug.skips.length;t<s;t++){if(createDebug.skips[t].test(e)){return false}}for(t=0,s=createDebug.names.length;t<s;t++){if(createDebug.names[t].test(e)){return true}}return false}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(e){if(e instanceof Error){return e.stack||e.message}return e}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}e.exports=setup},9438:(e,t,s)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){e.exports=s(372)}else{e.exports=s(8698)}},8698:(e,t,s)=>{const r=s(6224);const n=s(3837);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.destroy=n.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");t.colors=[6,2,3,4,5,1];try{const e=s(8134);if(e&&(e.stderr||e).level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const s=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];if(/^(yes|on|true|enabled)$/i.test(r)){r=true}else if(/^(no|off|false|disabled)$/i.test(r)){r=false}else if(r==="null"){r=null}else{r=Number(r)}e[s]=r;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:s,useColors:r}=this;if(r){const r=this.color;const n="[3"+(r<8?r:"8;5;"+r);const i=`  ${n};1m${s} [0m`;t[0]=i+t[0].split("\n").join("\n"+i);t.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else{t[0]=getDate()+s+" "+t[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...e){return process.stderr.write(n.format(...e)+"\n")}function save(e){if(e){process.env.DEBUG=e}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};const s=Object.keys(t.inspectOpts);for(let r=0;r<s.length;r++){e.inspectOpts[s[r]]=t.inspectOpts[s[r]]}}e.exports=s(9855)(t);const{formatters:i}=e.exports;i.o=function(e){this.inspectOpts.colors=this.useColors;return n.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")};i.O=function(e){this.inspectOpts.colors=this.useColors;return n.inspect(e,this.inspectOpts)}},6602:e=>{"use strict";function Denque(e,t){var t=t||{};this._capacity=t.capacity;this._head=0;this._tail=0;if(Array.isArray(e)){this._fromArray(e)}else{this._capacityMask=3;this._list=new Array(4)}}Denque.prototype.peekAt=function peekAt(e){var t=e;if(t!==(t|0)){return void 0}var s=this.size();if(t>=s||t<-s)return undefined;if(t<0)t+=s;t=this._head+t&this._capacityMask;return this._list[t]};Denque.prototype.get=function get(e){return this.peekAt(e)};Denque.prototype.peek=function peek(){if(this._head===this._tail)return undefined;return this._list[this._head]};Denque.prototype.peekFront=function peekFront(){return this.peek()};Denque.prototype.peekBack=function peekBack(){return this.peekAt(-1)};Object.defineProperty(Denque.prototype,"length",{get:function length(){return this.size()}});Denque.prototype.size=function size(){if(this._head===this._tail)return 0;if(this._head<this._tail)return this._tail-this._head;else return this._capacityMask+1-(this._head-this._tail)};Denque.prototype.unshift=function unshift(e){if(arguments.length===0)return this.size();var t=this._list.length;this._head=this._head-1+t&this._capacityMask;this._list[this._head]=e;if(this._tail===this._head)this._growArray();if(this._capacity&&this.size()>this._capacity)this.pop();if(this._head<this._tail)return this._tail-this._head;else return this._capacityMask+1-(this._head-this._tail)};Denque.prototype.shift=function shift(){var e=this._head;if(e===this._tail)return undefined;var t=this._list[e];this._list[e]=undefined;this._head=e+1&this._capacityMask;if(e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2)this._shrinkArray();return t};Denque.prototype.push=function push(e){if(arguments.length===0)return this.size();var t=this._tail;this._list[t]=e;this._tail=t+1&this._capacityMask;if(this._tail===this._head){this._growArray()}if(this._capacity&&this.size()>this._capacity){this.shift()}if(this._head<this._tail)return this._tail-this._head;else return this._capacityMask+1-(this._head-this._tail)};Denque.prototype.pop=function pop(){var e=this._tail;if(e===this._head)return undefined;var t=this._list.length;this._tail=e-1+t&this._capacityMask;var s=this._list[this._tail];this._list[this._tail]=undefined;if(this._head<2&&e>1e4&&e<=t>>>2)this._shrinkArray();return s};Denque.prototype.removeOne=function removeOne(e){var t=e;if(t!==(t|0)){return void 0}if(this._head===this._tail)return void 0;var s=this.size();var r=this._list.length;if(t>=s||t<-s)return void 0;if(t<0)t+=s;t=this._head+t&this._capacityMask;var n=this._list[t];var i;if(e<s/2){for(i=e;i>0;i--){this._list[t]=this._list[t=t-1+r&this._capacityMask]}this._list[t]=void 0;this._head=this._head+1+r&this._capacityMask}else{for(i=s-1-e;i>0;i--){this._list[t]=this._list[t=t+1+r&this._capacityMask]}this._list[t]=void 0;this._tail=this._tail-1+r&this._capacityMask}return n};Denque.prototype.remove=function remove(e,t){var s=e;var r;var n=t;if(s!==(s|0)){return void 0}if(this._head===this._tail)return void 0;var i=this.size();var o=this._list.length;if(s>=i||s<-i||t<1)return void 0;if(s<0)s+=i;if(t===1||!t){r=new Array(1);r[0]=this.removeOne(s);return r}if(s===0&&s+t>=i){r=this.toArray();this.clear();return r}if(s+t>i)t=i-s;var a;r=new Array(t);for(a=0;a<t;a++){r[a]=this._list[this._head+s+a&this._capacityMask]}s=this._head+s&this._capacityMask;if(e+t===i){this._tail=this._tail-t+o&this._capacityMask;for(a=t;a>0;a--){this._list[s=s+1+o&this._capacityMask]=void 0}return r}if(e===0){this._head=this._head+t+o&this._capacityMask;for(a=t-1;a>0;a--){this._list[s=s+1+o&this._capacityMask]=void 0}return r}if(s<i/2){this._head=this._head+e+t+o&this._capacityMask;for(a=e;a>0;a--){this.unshift(this._list[s=s-1+o&this._capacityMask])}s=this._head-1+o&this._capacityMask;while(n>0){this._list[s=s-1+o&this._capacityMask]=void 0;n--}if(e<0)this._tail=s}else{this._tail=s;s=s+t+o&this._capacityMask;for(a=i-(t+e);a>0;a--){this.push(this._list[s++])}s=this._tail;while(n>0){this._list[s=s+1+o&this._capacityMask]=void 0;n--}}if(this._head<2&&this._tail>1e4&&this._tail<=o>>>2)this._shrinkArray();return r};Denque.prototype.splice=function splice(e,t){var s=e;if(s!==(s|0)){return void 0}var r=this.size();if(s<0)s+=r;if(s>r)return void 0;if(arguments.length>2){var n;var i;var o;var a=arguments.length;var l=this._list.length;var c=2;if(!r||s<r/2){i=new Array(s);for(n=0;n<s;n++){i[n]=this._list[this._head+n&this._capacityMask]}if(t===0){o=[];if(s>0){this._head=this._head+s+l&this._capacityMask}}else{o=this.remove(s,t);this._head=this._head+s+l&this._capacityMask}while(a>c){this.unshift(arguments[--a])}for(n=s;n>0;n--){this.unshift(i[n-1])}}else{i=new Array(r-(s+t));var u=i.length;for(n=0;n<u;n++){i[n]=this._list[this._head+s+t+n&this._capacityMask]}if(t===0){o=[];if(s!=r){this._tail=this._head+s+l&this._capacityMask}}else{o=this.remove(s,t);this._tail=this._tail-u+l&this._capacityMask}while(c<a){this.push(arguments[c++])}for(n=0;n<u;n++){this.push(i[n])}}return o}else{return this.remove(s,t)}};Denque.prototype.clear=function clear(){this._list=new Array(this._list.length);this._head=0;this._tail=0};Denque.prototype.isEmpty=function isEmpty(){return this._head===this._tail};Denque.prototype.toArray=function toArray(){return this._copyArray(false)};Denque.prototype._fromArray=function _fromArray(e){var t=e.length;var s=this._nextPowerOf2(t);this._list=new Array(s);this._capacityMask=s-1;this._tail=t;for(var r=0;r<t;r++)this._list[r]=e[r]};Denque.prototype._copyArray=function _copyArray(e,t){var s=this._list;var r=s.length;var n=this.length;t=t|n;if(t==n&&this._head<this._tail){return this._list.slice(this._head,this._tail)}var i=new Array(t);var o=0;var a;if(e||this._head>this._tail){for(a=this._head;a<r;a++)i[o++]=s[a];for(a=0;a<this._tail;a++)i[o++]=s[a]}else{for(a=this._head;a<this._tail;a++)i[o++]=s[a]}return i};Denque.prototype._growArray=function _growArray(){if(this._head!=0){var e=this._copyArray(true,this._list.length<<1);this._tail=this._list.length;this._head=0;this._list=e}else{this._tail=this._list.length;this._list.length<<=1}this._capacityMask=this._capacityMask<<1|1};Denque.prototype._shrinkArray=function _shrinkArray(){this._list.length>>>=1;this._capacityMask>>>=1};Denque.prototype._nextPowerOf2=function _nextPowerOf2(e){var t=Math.log(e)/Math.log(2);var s=1<<t+1;return Math.max(s,4)};e.exports=Denque},5717:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(901);const n=s(9840);const i=s(3986);const o=s(5577);class Command{constructor(e,t=[],s={},r){this.name=e;this.inTransaction=false;this.isResolved=false;this.transformed=false;this.replyEncoding=s.replyEncoding;this.errorStack=s.errorStack;this.args=t.flat();this.callback=r;this.initPromise();if(s.keyPrefix){const e=s.keyPrefix instanceof Buffer;let t=e?s.keyPrefix:null;this._iterateKeys((r=>{if(r instanceof Buffer){if(t===null){t=Buffer.from(s.keyPrefix)}return Buffer.concat([t,r])}else if(e){return Buffer.concat([s.keyPrefix,Buffer.from(String(r))])}return s.keyPrefix+r}))}if(s.readOnly){this.isReadOnly=true}}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){if(!this.flagMap){this.flagMap=Object.keys(Command.FLAGS).reduce(((e,t)=>{e[t]={};Command.FLAGS[t].forEach((s=>{e[t][s]=true}));return e}),{})}return this.flagMap}getSlot(){if(typeof this.slot==="undefined"){const e=this.getKeys()[0];this.slot=e==null?null:n(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t;const s="*"+(this.args.length+1)+"\r\n$"+Buffer.byteLength(this.name)+"\r\n"+this.name+"\r\n";if(this.bufferMode){const e=new MixedBuffers;e.push(s);for(let t=0;t<this.args.length;++t){const s=this.args[t];if(s instanceof Buffer){if(s.length===0){e.push("$0\r\n\r\n")}else{e.push("$"+s.length+"\r\n");e.push(s);e.push("\r\n")}}else{e.push("$"+Buffer.byteLength(s)+"\r\n"+s+"\r\n")}}t=e.toBuffer()}else{t=s;for(let e=0;e<this.args.length;++e){const s=this.args[e];t+="$"+Buffer.byteLength(s)+"\r\n"+s+"\r\n"}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){const t=this.args[e];if(typeof t==="string"){}else if(t instanceof Buffer){this.bufferMode=true}else{this.args[e]=(0,o.toArg)(t)}}}transformReply(e){if(this.replyEncoding){e=(0,o.convertBufferToString)(e,this.replyEncoding)}const t=Command._transformer.reply[this.name];if(t){e=t(e)}return e}setTimeout(e){if(!this._commandTimeoutTimer){this._commandTimeoutTimer=setTimeout((()=>{if(!this.isResolved){this.reject(new Error("Command timed out"))}}),e)}}initPromise(){const e=new Promise(((e,t)=>{if(!this.transformed){this.transformed=true;const e=Command._transformer.argument[this.name];if(e){this.args=e(this.args)}this.stringifyArguments()}this.resolve=this._convertValue(e);if(this.errorStack){this.reject=e=>{t((0,o.optimizeErrorStack)(e,this.errorStack.stack,__dirname))}}else{this.reject=t}}));this.promise=(0,i.default)(e,this.callback)}_iterateKeys(e=(e=>e)){if(typeof this.keys==="undefined"){this.keys=[];if((0,r.exists)(this.name)){const t=(0,r.getKeyIndexes)(this.name,this.args);for(const s of t){this.args[s]=e(this.args[s]);this.keys.push(this.args[s])}}}return this.keys}_convertValue(e){return t=>{try{const s=this._commandTimeoutTimer;if(s){clearTimeout(s);delete this._commandTimeoutTimer}e(this.transformReply(t));this.isResolved=true}catch(e){this.reject(e)}return this.promise}}}t["default"]=Command;Command.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe"],WILL_DISCONNECT:["quit"]};Command._transformer={argument:{},reply:{}};const msetArgumentTransformer=function(e){if(e.length===1){if(e[0]instanceof Map){return(0,o.convertMapToArray)(e[0])}if(typeof e[0]==="object"&&e[0]!==null){return(0,o.convertObjectToArray)(e[0])}}return e};const hsetArgumentTransformer=function(e){if(e.length===2){if(e[1]instanceof Map){return[e[0]].concat((0,o.convertMapToArray)(e[1]))}if(typeof e[1]==="object"&&e[1]!==null){return[e[0]].concat((0,o.convertObjectToArray)(e[1]))}}return e};Command.setArgumentTransformer("mset",msetArgumentTransformer);Command.setArgumentTransformer("msetnx",msetArgumentTransformer);Command.setArgumentTransformer("hset",hsetArgumentTransformer);Command.setArgumentTransformer("hmset",hsetArgumentTransformer);Command.setReplyTransformer("hgetall",(function(e){if(Array.isArray(e)){const t={};for(let s=0;s<e.length;s+=2){const r=e[s];const n=e[s+1];if(r in t){Object.defineProperty(t,r,{value:n,configurable:true,enumerable:true,writable:true})}else{t[r]=n}}return t}return e}));class MixedBuffers{constructor(){this.length=0;this.items=[]}push(e){this.length+=Buffer.byteLength(e);this.items.push(e)}toBuffer(){const e=Buffer.allocUnsafe(this.length);let t=0;for(const s of this.items){const r=Buffer.byteLength(s);Buffer.isBuffer(s)?s.copy(e,t):e.write(s,t,r);t+=r}return e}}},5188:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(5717);const n=s(5577);const i=s(419);const o=s(5198);const a=(0,n.Debug)("dataHandler");class DataHandler{constructor(e,t){this.redis=e;const s=new i({stringNumbers:t.stringNumbers,returnBuffers:true,returnError:e=>{this.returnError(e)},returnFatalError:e=>{this.returnFatalError(e)},returnReply:e=>{this.returnReply(e)}});e.stream.on("data",(e=>{s.execute(e)}))}returnFatalError(e){e.message+=". Please report this.";this.redis.recoverFromFatalError(e,e,{offlineQueue:false})}returnError(e){const t=this.shiftCommand(e);if(!t){return}e.command={name:t.command.name,args:t.command.args};this.redis.handleReconnection(e,t)}returnReply(e){if(this.handleMonitorReply(e)){return}if(this.handleSubscriberReply(e)){return}const t=this.shiftCommand(e);if(!t){return}if(r.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)){this.redis.condition.subscriber=new o.default;this.redis.condition.subscriber.add(t.command.name,e[1].toString());if(!fillSubCommand(t.command,e[2])){this.redis.commandQueue.unshift(t)}}else if(r.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)){if(!fillUnsubCommand(t.command,e[2])){this.redis.commandQueue.unshift(t)}}else{t.command.resolve(e)}}handleSubscriberReply(e){if(!this.redis.condition.subscriber){return false}const t=Array.isArray(e)?e[0].toString():null;a('receive reply "%s" in subscriber mode',t);switch(t){case"message":if(this.redis.listeners("message").length>0){this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():"")}this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{const t=e[1].toString();if(this.redis.listeners("pmessage").length>0){this.redis.emit("pmessage",t,e[2].toString(),e[3].toString())}this.redis.emit("pmessageBuffer",t,e[2],e[3]);break}case"subscribe":case"psubscribe":{const s=e[1].toString();this.redis.condition.subscriber.add(t,s);const r=this.shiftCommand(e);if(!r){return}if(!fillSubCommand(r.command,e[2])){this.redis.commandQueue.unshift(r)}break}case"unsubscribe":case"punsubscribe":{const s=e[1]?e[1].toString():null;if(s){this.redis.condition.subscriber.del(t,s)}const r=e[2];if(r===0){this.redis.condition.subscriber=false}const n=this.shiftCommand(e);if(!n){return}if(!fillUnsubCommand(n.command,r)){this.redis.commandQueue.unshift(n)}break}default:{const t=this.shiftCommand(e);if(!t){return}t.command.resolve(e)}}return true}handleMonitorReply(e){if(this.redis.status!=="monitoring"){return false}const t=e.toString();if(t==="OK"){return false}const s=t.indexOf(" ");const r=t.slice(0,s);const n=t.indexOf('"');const i=t.slice(n+1,-1).split('" "').map((e=>e.replace(/\\"/g,'"')));const o=t.slice(s+2,n-2).split(" ");this.redis.emit("monitor",r,i,o[1],o[0]);return true}shiftCommand(e){const t=this.redis.commandQueue.shift();if(!t){const t="Command queue state error. If you can reproduce this, please report it.";const s=new Error(t+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));this.redis.emit("error",s);return null}return t}}t["default"]=DataHandler;const l=new WeakMap;function fillSubCommand(e,t){let s=l.has(e)?l.get(e):e.args.length;s-=1;if(s<=0){e.resolve(t);l.delete(e);return true}l.set(e,s);return false}function fillUnsubCommand(e,t){let s=l.has(e)?l.get(e):e.args.length;if(s===0){if(t===0){l.delete(e);e.resolve(t);return true}return false}s-=1;if(s<=0){e.resolve(t);return true}l.set(e,s);return false}},6822:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(9840);const n=s(901);const i=s(3986);const o=s(3837);const a=s(5717);const l=s(5577);const c=s(6273);function generateMultiWithNodes(e,t){const s=r(t[0]);const n=e._groupsBySlot[s];for(let s=1;s<t.length;s++){if(e._groupsBySlot[r(t[s])]!==n){return-1}}return s}class Pipeline extends c.default{constructor(e){super();this.redis=e;this.isPipeline=true;this.replyPending=0;this._queue=[];this._result=[];this._transactions=0;this._shaToScript={};this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster;this.options=e.options;Object.keys(e.scriptsSet).forEach((t=>{const s=e.scriptsSet[t];this._shaToScript[s.sha]=s;this[t]=e[t];this[t+"Buffer"]=e[t+"Buffer"]}));e.addedBuiltinSet.forEach((t=>{this[t]=e[t];this[t+"Buffer"]=e[t+"Buffer"]}));this.promise=new Promise(((e,t)=>{this.resolve=e;this.reject=t}));const t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if(this._queue[t].name==="exec"&&Array.isArray(e[1])){const s=e[1].length;for(let r=0;r<s;r++){if(e[1][r]instanceof Error){continue}const n=this._queue[t-(s-r)];try{e[1][r]=n.transformReply(e[1][r])}catch(t){e[1][r]=t}}}this._result[t]=e;if(--this.replyPending){return}if(this.isCluster){let e=true;let t;for(let s=0;s<this._result.length;++s){const r=this._result[s][0];const i=this._queue[s];if(r){if(i.name==="exec"&&r.message==="EXECABORT Transaction discarded because of previous errors."){continue}if(!t){t={name:r.name,message:r.message}}else if(t.name!==r.name||t.message!==r.message){e=false;break}}else if(!i.inTransaction){const t=(0,n.exists)(i.name)&&(0,n.hasFlag)(i.name,"readonly");if(!t){e=false;break}}}if(t&&e){const e=this;const s=t.message.split(" ");const r=this._queue;let n=false;this._queue=[];for(let e=0;e<r.length;++e){if(s[0]==="ASK"&&!n&&r[e].name!=="asking"&&(!r[e-1]||r[e-1].name!=="asking")){const e=new a.default("asking");e.ignore=true;this.sendCommand(e)}r[e].initPromise();this.sendCommand(r[e]);n=r[e].inTransaction}let i=true;if(typeof this.leftRedirections==="undefined"){this.leftRedirections={}}const exec=function(){e.exec()};const o=this.redis;o.handleError(t,this.leftRedirections,{moved:function(t,r){e.preferKey=r;o.slots[s[1]]=[r];o._groupsBySlot[s[1]]=o._groupsIds[o.slots[s[1]].join(";")];o.refreshSlotsCache();e.exec()},ask:function(t,s){e.preferKey=s;e.exec()},tryagain:exec,clusterDown:exec,connectionClosed:exec,maxRedirections:()=>{i=false},defaults:()=>{i=false}});if(i){return}}}let s=0;for(let e=0;e<this._queue.length-s;++e){if(this._queue[e+s].ignore){s+=1}this._result[e]=this._result[e+s]}this.resolve(this._result.slice(0,this._result.length-s))}sendCommand(e){if(this._transactions>0){e.inTransaction=true}const t=this._queue.length;e.pipelineIndex=t;e.promise.then((e=>{this.fillResult([null,e],t)})).catch((e=>{this.fillResult([e],t)}));this._queue.push(e);return this}addBatch(e){let t,s,r;for(let n=0;n<e.length;++n){t=e[n];s=t[0];r=t.slice(1);this[s].apply(this,r)}return this}}t["default"]=Pipeline;const u=Pipeline.prototype.multi;Pipeline.prototype.multi=function(){this._transactions+=1;return u.apply(this,arguments)};const f=Pipeline.prototype.execBuffer;Pipeline.prototype.execBuffer=(0,o.deprecate)((function(){if(this._transactions>0){this._transactions-=1}return f.apply(this,arguments)}),"Pipeline#execBuffer: Use Pipeline#exec instead");Pipeline.prototype.exec=function(e){if(this.isCluster&&!this.redis.slots.length){if(this.redis.status==="wait")this.redis.connect().catch(l.noop);if(e&&!this.nodeifiedPromise){this.nodeifiedPromise=true;(0,i.default)(this.promise,e)}this.redis.delayUntilReady((t=>{if(t){this.reject(t);return}this.exec(e)}));return this.promise}if(this._transactions>0){this._transactions-=1;return f.apply(this,arguments)}if(!this.nodeifiedPromise){this.nodeifiedPromise=true;(0,i.default)(this.promise,e)}if(!this._queue.length){this.resolve([])}let t;if(this.isCluster){const e=[];for(let t=0;t<this._queue.length;t++){const s=this._queue[t].getKeys();if(s.length){e.push(s[0])}if(s.length&&r.generateMulti(s)<0){this.reject(new Error("All the keys in a pipeline command should belong to the same slot"));return this.promise}}if(e.length){t=generateMultiWithNodes(this.redis,e);if(t<0){this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group"));return this.promise}}else{t=Math.random()*16384|0}}const s=this;execPipeline();return this.promise;function execPipeline(){let e=s.replyPending=s._queue.length;let r;if(s.isCluster){r={slot:t,redis:s.redis.connectionPool.nodes.all[s.preferKey]}}let n="";let i;const o={isPipeline:true,destination:s.isCluster?r:{redis:s.redis},write(t){if(typeof t!=="string"){if(!i){i=[]}if(n){i.push(Buffer.from(n,"utf8"));n=""}i.push(t)}else{n+=t}if(!--e){if(i){if(n){i.push(Buffer.from(n,"utf8"))}o.destination.redis.stream.write(Buffer.concat(i))}else{o.destination.redis.stream.write(n)}e=s._queue.length;n="";i=undefined}}};for(let e=0;e<s._queue.length;++e){s.redis.sendCommand(s._queue[e],o,r)}return s.promise}}},7865:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(901);const n=s(2361);const i=s(3986);const o=s(2496);const a=s(5717);const l=s(9317);const c=s(5202);const u=s(5234);const f=s(6990);const h=s(6354);const p=s(2856);const d=s(5577);const y=s(7323);const g=s(6273);const m=s(8560);const b=s(6602);const S=(0,d.Debug)("redis");class Redis extends g.default{constructor(e,t,s){super();this.status="wait";this.isCluster=false;this.reconnectTimeout=null;this.connectionEpoch=0;this.retryAttempts=0;this.manuallyClosing=false;this._autoPipelines=new Map;this._runningAutoPipelines=new Set;this.parseOptions(e,t,s);n.EventEmitter.call(this);this.resetCommandQueue();this.resetOfflineQueue();if(this.options.Connector){this.connector=new this.options.Connector(this.options)}else if(this.options.sentinels){const e=new c.default(this.options);e.emitter=this;this.connector=e}else{this.connector=new l.StandaloneConnector(this.options)}if(this.options.scripts){Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)}))}if(this.options.lazyConnect){this.setStatus("wait")}else{this.connect().catch(m.noop)}}static createClient(...e){return new Redis(...e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values()){e+=t.length}return e}connect(e){const t=new Promise(((e,t)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){t(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1;this.setStatus("connecting");const{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:false};const r=this;(0,i.default)(this.connector.connect((function(e,t){r.silentEmit(e,t)})),(function(n,i){if(n){r.flushQueue(n);r.silentEmit("error",n);t(n);r.setStatus("end");return}let o=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode){o="connect"}r.stream=i;if(s.noDelay){i.setNoDelay(true)}if(typeof s.keepAlive==="number"){if(i.connecting){i.once(o,(()=>i.setKeepAlive(true,s.keepAlive)))}else{i.setKeepAlive(true,s.keepAlive)}}if(i.connecting){i.once(o,u.connectHandler(r));if(s.connectTimeout){let e=false;i.setTimeout(s.connectTimeout,(function(){if(e){return}i.setTimeout(0);i.destroy();const t=new Error("connect ETIMEDOUT");t.errorno="ETIMEDOUT";t.code="ETIMEDOUT";t.syscall="connect";u.errorHandler(r)(t)}));i.once(o,(function(){e=true;i.setTimeout(0)}))}}else if(i.destroyed){const e=r.connector.firstError;if(e){process.nextTick((()=>{u.errorHandler(r)(e)}))}process.nextTick(u.closeHandler(r))}else{process.nextTick(u.connectHandler(r))}if(!i.destroyed){i.once("error",u.errorHandler(r));i.once("close",u.closeHandler(r))}const connectionReadyHandler=function(){r.removeListener("close",connectionCloseHandler);e()};var connectionCloseHandler=function(){r.removeListener("ready",connectionReadyHandler);t(new Error(d.CONNECTION_CLOSED_ERROR_MSG))};r.once("ready",connectionReadyHandler);r.once("close",connectionCloseHandler)}))}));return(0,i.default)(t,e)}disconnect(e=false){if(!e){this.manuallyClosing=true}if(this.reconnectTimeout&&!e){clearTimeout(this.reconnectTimeout);this.reconnectTimeout=null}if(this.status==="wait"){u.closeHandler(this)()}else{this.connector.disconnect()}}end(){this.disconnect()}duplicate(e){return new Redis({...this.options,...e})}get mode(){return this.options.monitor?"monitor":this.condition.subscriber?"subscriber":"normal"}monitor(e){const t=this.duplicate({monitor:true,lazyConnect:false});return(0,i.default)(new Promise((function(e,s){t.once("error",s);t.once("monitoring",(function(){e(t)}))})),e)}sendCommand(e,t){if(this.status==="wait"){this.connect().catch(m.noop)}if(this.status==="end"){e.reject(new Error(d.CONNECTION_CLOSED_ERROR_MSG));return e.promise}if(this.condition.subscriber&&!a.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name)){e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used"));return e.promise}if(typeof this.options.commandTimeout==="number"){e.setTimeout(this.options.commandTimeout)}let s=this.status==="ready"||!t&&this.status==="connect"&&(0,r.exists)(e.name)&&(0,r.hasFlag)(e.name,"loading");if(!this.stream){s=false}else if(!this.stream.writable){s=false}else if(this.stream._writableState&&this.stream._writableState.ended){s=false}if(!s){if(!this.options.enableOfflineQueue){e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false"));return e.promise}if(e.name==="quit"&&this.offlineQueue.length===0){this.disconnect();e.resolve(Buffer.from("OK"));return e.promise}if(S.enabled){S("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args)}this.offlineQueue.push({command:e,stream:t,select:this.condition.select})}else{if(S.enabled){S("write command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args)}if(t){if("isPipeline"in t&&t.isPipeline){t.write(e.toWritable(t.destination.redis.stream))}else{t.write(e.toWritable(t))}}else{this.stream.write(e.toWritable(this.stream))}this.commandQueue.push({command:e,stream:t,select:this.condition.select});if(a.default.checkFlag("WILL_DISCONNECT",e.name)){this.manuallyClosing=true}}if(e.name==="select"&&(0,d.isInt)(e.args[0])){const t=parseInt(e.args[0],10);if(this.condition.select!==t){this.condition.select=t;this.emit("select",t);S("switch to db [%d]",this.condition.select)}}return e.promise}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let s;if(e==="error"){s=t;if(this.status==="end"){return}if(this.manuallyClosing){if(s instanceof Error&&(s.message===d.CONNECTION_CLOSED_ERROR_MSG||s.syscall==="connect"||s.syscall==="read")){return}}}if(this.listeners(e).length>0){return this.emit.apply(this,arguments)}return false}_getDescription(){let e;if("path"in this.options&&this.options.path){e=this.options.path}else if(this.stream&&this.stream.remoteAddress&&this.stream.remotePort){e=this.stream.remoteAddress+":"+this.stream.remotePort}else if("host"in this.options&&this.options.host){e=this.options.host+":"+this.options.port}else{e=""}if(this.options.connectionName){e+=` (${this.options.connectionName})`}return e}resetCommandQueue(){this.commandQueue=new b}resetOfflineQueue(){this.offlineQueue=new b}recoverFromFatalError(e,t,s){this.flushQueue(t,s);this.silentEmit("error",t);this.disconnect(true)}handleReconnection(e,t){let s=false;if(this.options.reconnectOnError){s=this.options.reconnectOnError(e)}switch(s){case 1:case true:if(this.status!=="reconnecting"){this.disconnect(true)}t.command.reject(e);break;case 2:if(this.status!=="reconnecting"){this.disconnect(true)}if(this.condition.select!==t.select&&t.command.name!=="select"){this.select(t.select)}this.sendCommand(t.command);break;default:t.command.reject(e)}}parseOptions(...e){const t={};let s=false;for(let r=0;r<e.length;++r){const n=e[r];if(n===null||typeof n==="undefined"){continue}if(typeof n==="object"){(0,m.defaults)(t,n)}else if(typeof n==="string"){(0,m.defaults)(t,(0,d.parseURL)(n));if(n.startsWith("rediss://")){s=true}}else if(typeof n==="number"){t.port=n}else{throw new Error("Invalid argument "+n)}}if(s){(0,m.defaults)(t,{tls:true})}(0,m.defaults)(t,Redis.defaultOptions);if(typeof t.port==="string"){t.port=parseInt(t.port,10)}if(typeof t.db==="string"){t.db=parseInt(t.db,10)}this.options=(0,d.resolveTLSProfile)(t)}setStatus(e,t){if(S.enabled){S("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e)}this.status=e;process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:s={}}){return new h.default({objectMode:true,key:t,redis:this,command:e,...s})}flushQueue(e,t){t=(0,m.defaults)({},t,{offlineQueue:true,commandQueue:true});let s;if(t.offlineQueue){while(s=this.offlineQueue.shift()){s.command.reject(e)}}if(t.commandQueue){if(this.commandQueue.length>0){if(this.stream){this.stream.removeAllListeners("data")}while(s=this.commandQueue.shift()){s.command.reject(e)}}}}_readyCheck(e){const t=this;this.info((function(s,r){if(s){if(s.message&&s.message.includes("NOPERM")){console.warn(`Skipping the ready check because INFO command fails: "${s.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`);return e(null,{})}return e(s)}if(typeof r!=="string"){return e(null,r)}const n={};const i=r.split("\r\n");for(let e=0;e<i.length;++e){const[t,...s]=i[e].split(":");const r=s.join(":");if(r){n[t]=r}}if(!n.loading||n.loading==="0"){e(null,n)}else{const s=(n.loading_eta_seconds||1)*1e3;const r=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<s?t.options.maxLoadingRetryTime:s;S("Redis server still loading, trying again in "+r+"ms");setTimeout((function(){t._readyCheck(e)}),r)}})).catch(m.noop)}}Redis.Cluster=o.default;Redis.Command=a.default;Redis.defaultOptions=f.DEFAULT_REDIS_OPTIONS;(0,y.default)(Redis,n.EventEmitter);(0,p.addTransactionSupport)(Redis.prototype);t["default"]=Redis},6354:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(2781);class ScanStream extends r.Readable{constructor(e){super(e);this.opt=e;this._redisCursor="0";this._redisDrained=false}_read(){if(this._redisDrained){this.push(null);return}const e=[this._redisCursor];if(this.opt.key){e.unshift(this.opt.key)}if(this.opt.match){e.push("MATCH",this.opt.match)}if(this.opt.type){e.push("TYPE",this.opt.type)}if(this.opt.count){e.push("COUNT",String(this.opt.count))}this.opt.redis[this.opt.command](e,((e,t)=>{if(e){this.emit("error",e);return}this._redisCursor=t[0]instanceof Buffer?t[0].toString():t[0];if(this._redisCursor==="0"){this._redisDrained=true}this.push(t[1])}))}close(){this._redisDrained=true}}t["default"]=ScanStream},3093:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(6113);const n=s(5717);const i=s(3986);class Script{constructor(e,t=null,s="",i=false){this.lua=e;this.numberOfKeys=t;this.keyPrefix=s;this.readOnly=i;this.sha=(0,r.createHash)("sha1").update(e).digest("hex");const o=this.sha;const a=new WeakSet;this.Command=class CustomScriptCommand extends n.default{toWritable(t){const s=this.reject;this.reject=e=>{if(e.message.indexOf("NOSCRIPT")!==-1){a.delete(t)}s.call(this,e)};if(!a.has(t)){a.add(t);this.name="eval";this.args[0]=e}else if(this.name==="eval"){this.name="evalsha";this.args[0]=o}return super.toWritable(t)}}}execute(e,t,s,r){if(typeof this.numberOfKeys==="number"){t.unshift(this.numberOfKeys)}if(this.keyPrefix){s.keyPrefix=this.keyPrefix}if(this.readOnly){s.readOnly=true}const n=new this.Command("evalsha",[this.sha,...t],s);n.promise=n.promise.catch((r=>{if(r.message.indexOf("NOSCRIPT")===-1){throw r}const n=new this.Command("evalsha",[this.sha,...t],s);const i=e.isPipeline?e.redis:e;return i.sendCommand(n)}));(0,i.default)(n.promise,r);return e.sendCommand(n)}}t["default"]=Script},5198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});class SubscriptionSet{constructor(){this.set={subscribe:{},psubscribe:{}}}add(e,t){this.set[mapSet(e)][t]=true}del(e,t){delete this.set[mapSet(e)][t]}channels(e){return Object.keys(this.set[mapSet(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0}}t["default"]=SubscriptionSet;function mapSet(e){if(e==="unsubscribe"){return"subscribe"}if(e==="punsubscribe"){return"psubscribe"}return e}},8279:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.executeWithAutoPipelining=t.getFirstValueInFlattenedArray=t.shouldUseAutoPipelining=t.notAllowedAutoPipelineCommands=t.kCallbacks=t.kExec=void 0;const r=s(8560);const n=s(9840);const i=s(3986);t.kExec=Symbol("exec");t.kCallbacks=Symbol("callbacks");t.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe"];function executeAutoPipeline(e,s){if(e._runningAutoPipelines.has(s)){return}if(!e._autoPipelines.has(s)){return}e._runningAutoPipelines.add(s);const r=e._autoPipelines.get(s);e._autoPipelines.delete(s);const n=r[t.kCallbacks];r[t.kCallbacks]=null;r.exec((function(t,r){e._runningAutoPipelines.delete(s);if(t){for(let e=0;e<n.length;e++){process.nextTick(n[e],t)}}else{for(let e=0;e<n.length;e++){process.nextTick(n[e],...r[e])}}if(e._autoPipelines.has(s)){executeAutoPipeline(e,s)}}))}function shouldUseAutoPipelining(e,s,r){return s&&e.options.enableAutoPipelining&&!e.isPipeline&&!t.notAllowedAutoPipelineCommands.includes(r)&&!e.options.autoPipeliningIgnoredCommands.includes(r)}t.shouldUseAutoPipelining=shouldUseAutoPipelining;function getFirstValueInFlattenedArray(e){for(let t=0;t<e.length;t++){const s=e[t];if(typeof s==="string"){return s}else if(Array.isArray(s)||(0,r.isArguments)(s)){if(s.length===0){continue}return s[0]}const n=[s].flat();if(n.length>0){return n[0]}}return undefined}t.getFirstValueInFlattenedArray=getFirstValueInFlattenedArray;function executeWithAutoPipelining(e,s,o,a,l){if(e.isCluster&&!e.slots.length){if(e.status==="wait")e.connect().catch(r.noop);return(0,i.default)(new Promise((function(t,r){e.delayUntilReady((n=>{if(n){r(n);return}executeWithAutoPipelining(e,s,o,a,null).then(t,r)}))})),l)}const c=e.options.keyPrefix||"";const u=e.isCluster?e.slots[n(`${c}${getFirstValueInFlattenedArray(a)}`)].join(","):"main";if(!e._autoPipelines.has(u)){const s=e.pipeline();s[t.kExec]=false;s[t.kCallbacks]=[];e._autoPipelines.set(u,s)}const f=e._autoPipelines.get(u);if(!f[t.kExec]){f[t.kExec]=true;setImmediate(executeAutoPipeline,e,u)}const h=new Promise((function(e,r){f[t.kCallbacks].push((function(t,s){if(t){r(t);return}e(s)}));if(s==="call"){a.unshift(o)}f[s](...a)}));return(0,i.default)(h,l)}t.executeWithAutoPipelining=executeWithAutoPipelining},4317:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DEFAULT_CLUSTER_OPTIONS=void 0;const r=s(9523);t.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:e=>Math.min(100+e*2,2e3),enableOfflineQueue:true,enableReadyCheck:true,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:false,resolveSrv:r.resolveSrv,dnsLookup:r.lookup,enableAutoPipelining:false,autoPipeliningIgnoredCommands:[]}},8340:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(2892);const n=s(5577);const i=s(7865);const o=(0,n.Debug)("cluster:subscriber");class ClusterSubscriber{constructor(e,t){this.connectionPool=e;this.emitter=t;this.started=false;this.subscriber=null;this.onSubscriberEnd=()=>{if(!this.started){o("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}o("subscriber has disconnected, selecting a new one...");this.selectSubscriber()};this.connectionPool.on("-node",((e,t)=>{if(!this.started||!this.subscriber){return}if((0,r.getNodeKey)(this.subscriber.options)===t){o("subscriber has left, selecting a new one...");this.selectSubscriber()}}));this.connectionPool.on("+node",(()=>{if(!this.started||this.subscriber){return}o("a new node is discovered and there is no subscriber, selecting a new one...");this.selectSubscriber()}))}getInstance(){return this.subscriber}start(){this.started=true;this.selectSubscriber();o("started")}stop(){this.started=false;if(this.subscriber){this.subscriber.disconnect();this.subscriber=null}o("stopped")}selectSubscriber(){const e=this.lastActiveSubscriber;if(e){e.off("end",this.onSubscriberEnd);e.disconnect()}if(this.subscriber){this.subscriber.off("end",this.onSubscriberEnd);this.subscriber.disconnect()}const t=(0,n.sample)(this.connectionPool.getNodes());if(!t){o("selecting subscriber failed since there is no node discovered in the cluster yet");this.subscriber=null;return}const{options:s}=t;o("selected a subscriber %s:%s",s.host,s.port);this.subscriber=new i.default({port:s.port,host:s.host,username:s.username,password:s.password,enableReadyCheck:true,connectionName:(0,r.getConnectionName)("subscriber",s.connectionName),lazyConnect:true,tls:s.tls,retryStrategy:null});this.subscriber.on("error",n.noop);this.subscriber.once("end",this.onSubscriberEnd);const a={subscribe:[],psubscribe:[]};if(e){const t=e.condition||e.prevCondition;if(t&&t.subscriber){a.subscribe=t.subscriber.channels("subscribe");a.psubscribe=t.subscriber.channels("psubscribe")}}if(a.subscribe.length||a.psubscribe.length){let e=0;for(const t of["subscribe","psubscribe"]){const s=a[t];if(s.length){e+=1;o("%s %d channels",t,s.length);this.subscriber[t](s).then((()=>{if(!--e){this.lastActiveSubscriber=this.subscriber}})).catch((()=>{o("failed to %s %d channels",t,s.length)}))}}}else{this.lastActiveSubscriber=this.subscriber}for(const e of["message","messageBuffer"]){this.subscriber.on(e,((t,s)=>{this.emitter.emit(e,t,s)}))}for(const e of["pmessage","pmessageBuffer"]){this.subscriber.on(e,((t,s,r)=>{this.emitter.emit(e,t,s,r)}))}}}t["default"]=ClusterSubscriber},8119:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(2361);const n=s(5577);const i=s(2892);const o=s(7865);const a=(0,n.Debug)("cluster:connectionPool");class ConnectionPool extends r.EventEmitter{constructor(e){super();this.redisOptions=e;this.nodes={all:{},master:{},slave:{}};this.specifiedOptions={}}getNodes(e="all"){const t=this.nodes[e];return Object.keys(t).map((e=>t[e]))}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){const t=Object.keys(this.nodes[e]);const s=(0,n.sample)(t);return this.nodes[e][s]}findOrCreate(e,t=false){const s=(0,i.getNodeKey)(e);t=Boolean(t);if(this.specifiedOptions[s]){Object.assign(e,this.specifiedOptions[s])}else{this.specifiedOptions[s]=e}let r;if(this.nodes.all[s]){r=this.nodes.all[s];if(r.options.readOnly!==t){r.options.readOnly=t;a("Change role of %s to %s",s,t?"slave":"master");r[t?"readonly":"readwrite"]().catch(n.noop);if(t){delete this.nodes.master[s];this.nodes.slave[s]=r}else{delete this.nodes.slave[s];this.nodes.master[s]=r}}}else{a("Connecting to %s as %s",s,t?"slave":"master");r=new o.default((0,n.defaults)({retryStrategy:null,enableOfflineQueue:true,readOnly:t},e,this.redisOptions,{lazyConnect:true}));this.nodes.all[s]=r;this.nodes[t?"slave":"master"][s]=r;r.once("end",(()=>{this.removeNode(s);this.emit("-node",r,s);if(!Object.keys(this.nodes.all).length){this.emit("drain")}}));this.emit("+node",r,s);r.on("error",(function(e){this.emit("nodeError",e,s)}))}return r}reset(e){a("Reset with %O",e);const t={};e.forEach((e=>{const s=(0,i.getNodeKey)(e);if(!(e.readOnly&&t[s])){t[s]=e}}));Object.keys(this.nodes.all).forEach((e=>{if(!t[e]){a("Disconnect %s because the node does not hold any slot",e);this.nodes.all[e].disconnect();this.removeNode(e)}}));Object.keys(t).forEach((e=>{const s=t[e];this.findOrCreate(s,s.readOnly)}))}removeNode(e){const{nodes:t}=this;if(t.all[e]){a("Remove %s from the pool",e);delete t.all[e]}delete t.master[e];delete t.slave[e]}}t["default"]=ConnectionPool},8523:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(5577);const n=s(6602);const i=(0,r.Debug)("delayqueue");class DelayQueue{constructor(){this.queues={};this.timeouts={}}push(e,t,s){const r=s.callback||process.nextTick;if(!this.queues[e]){this.queues[e]=new n}const i=this.queues[e];i.push(t);if(!this.timeouts[e]){this.timeouts[e]=setTimeout((()=>{r((()=>{this.timeouts[e]=null;this.execute(e)}))}),s.timeout)}}execute(e){const t=this.queues[e];if(!t){return}const{length:s}=t;if(!s){return}i("send %d commands in %s queue",s,e);this.queues[e]=null;while(t.length>0){t.shift()()}}}t["default"]=DelayQueue},2496:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(901);const n=s(2361);const i=s(8395);const o=s(3986);const a=s(5717);const l=s(3601);const c=s(7865);const u=s(6354);const f=s(2856);const h=s(5577);const p=s(7323);const d=s(6273);const y=s(4317);const g=s(8340);const m=s(8119);const b=s(8523);const S=s(2892);const k=s(6602);const C=(0,h.Debug)("cluster");const w=new WeakSet;class Cluster extends d.default{constructor(e,t={}){super();this.slots=[];this._groupsIds={};this._groupsBySlot=Array(16384);this.isCluster=true;this.retryAttempts=0;this.delayQueue=new b.default;this.offlineQueue=new k;this.isRefreshing=false;this._autoPipelines=new Map;this._runningAutoPipelines=new Set;this._readyDelayedCallbacks=[];this.connectionEpoch=0;n.EventEmitter.call(this);this.startupNodes=e;this.options=(0,h.defaults)({},t,y.DEFAULT_CLUSTER_OPTIONS,this.options);if(this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix){this.options.keyPrefix=this.options.redisOptions.keyPrefix}if(typeof this.options.scaleReads!=="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1){throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function')}this.connectionPool=new m.default(this.options.redisOptions);this.connectionPool.on("-node",((e,t)=>{this.emit("-node",e)}));this.connectionPool.on("+node",(e=>{this.emit("+node",e)}));this.connectionPool.on("drain",(()=>{this.setStatus("close")}));this.connectionPool.on("nodeError",((e,t)=>{this.emit("node error",e,t)}));this.subscriber=new g.default(this.connectionPool,this);if(this.options.scripts){Object.entries(this.options.scripts).forEach((([e,t])=>{this.defineCommand(e,t)}))}if(this.options.lazyConnect){this.setStatus("wait")}else{this.connect().catch((e=>{C("connecting failed: %s",e)}))}}connect(){return new Promise(((e,t)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){t(new Error("Redis is already connecting/connected"));return}const s=++this.connectionEpoch;this.setStatus("connecting");this.resolveStartupNodeHostnames().then((r=>{if(this.connectionEpoch!==s){C("discard connecting after resolving startup nodes because epoch not match: %d != %d",s,this.connectionEpoch);t(new i.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){C("discard connecting after resolving startup nodes because the status changed to %s",this.status);t(new i.RedisError("Connection is aborted"));return}this.connectionPool.reset(r);const readyHandler=()=>{this.setStatus("ready");this.retryAttempts=0;this.executeOfflineCommands();this.resetNodesRefreshInterval();e()};let n=undefined;const refreshListener=()=>{this.invokeReadyDelayedCallbacks(undefined);this.removeListener("close",n);this.manuallyClosing=false;this.setStatus("connect");if(this.options.enableReadyCheck){this.readyCheck(((e,t)=>{if(e||t){C("Ready check failed (%s). Reconnecting...",e||t);if(this.status==="connect"){this.disconnect(true)}}else{readyHandler()}}))}else{readyHandler()}};n=()=>{const e=new Error("None of startup nodes is available");this.removeListener("refresh",refreshListener);this.invokeReadyDelayedCallbacks(e);t(e)};this.once("refresh",refreshListener);this.once("close",n);this.once("close",this.handleCloseEvent.bind(this));this.refreshSlotsCache((e=>{if(e&&e.message===l.default.defaultMessage){c.default.prototype.silentEmit.call(this,"error",e);this.connectionPool.reset([])}}));this.subscriber.start()})).catch((e=>{this.setStatus("close");this.handleCloseEvent(e);this.invokeReadyDelayedCallbacks(e);t(e)}))}))}disconnect(e=false){const t=this.status;this.setStatus("disconnecting");if(!e){this.manuallyClosing=true}if(this.reconnectTimeout&&!e){clearTimeout(this.reconnectTimeout);this.reconnectTimeout=null;C("Canceled reconnecting attempts")}this.clearNodesRefreshInterval();this.subscriber.stop();if(t==="wait"){this.setStatus("close");this.handleCloseEvent()}else{this.connectionPool.reset([])}}quit(e){const t=this.status;this.setStatus("disconnecting");this.manuallyClosing=true;if(this.reconnectTimeout){clearTimeout(this.reconnectTimeout);this.reconnectTimeout=null}this.clearNodesRefreshInterval();this.subscriber.stop();if(t==="wait"){const t=(0,o.default)(Promise.resolve("OK"),e);setImmediate(function(){this.setStatus("close");this.handleCloseEvent()}.bind(this));return t}return(0,o.default)(Promise.all(this.nodes().map((e=>e.quit().catch((e=>{if(e.message===h.CONNECTION_CLOSED_ERROR_MSG){return"OK"}throw e}))))).then((()=>"OK")),e)}duplicate(e=[],t={}){const s=e.length>0?e:this.startupNodes.slice(0);const r=Object.assign({},this.options,t);return new Cluster(s,r)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave"){throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"')}return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values()){e+=t.length}return e}refreshSlotsCache(e){if(this.isRefreshing){if(e){process.nextTick(e)}return}this.isRefreshing=true;const t=this;const wrapper=t=>{this.isRefreshing=false;if(e){e(t)}};const s=(0,h.shuffle)(this.connectionPool.getNodes());let r=null;function tryNode(e){if(e===s.length){const e=new l.default(l.default.defaultMessage,r);return wrapper(e)}const n=s[e];const i=`${n.options.host}:${n.options.port}`;C("getting slot cache from %s",i);t.getInfoFromNode(n,(function(s){switch(t.status){case"close":case"end":return wrapper(new Error("Cluster is disconnected."));case"disconnecting":return wrapper(new Error("Cluster is disconnecting."))}if(s){t.emit("node error",s,i);r=s;tryNode(e+1)}else{t.emit("refresh");wrapper()}}))}tryNode(0)}sendCommand(e,t,s){if(this.status==="wait"){this.connect().catch(h.noop)}if(this.status==="end"){e.reject(new Error(h.CONNECTION_CLOSED_ERROR_MSG));return e.promise}let n=this.options.scaleReads;if(n!=="master"){const t=e.isReadOnly||(0,r.exists)(e.name)&&(0,r.hasFlag)(e.name,"readonly");if(!t){n="master"}}let o=s?s.slot:e.getSlot();const l={};const c=this;if(!s&&!w.has(e)){w.add(e);const t=e.reject;e.reject=function(s){const r=tryConnection.bind(null,true);c.handleError(s,l,{moved:function(t,s){C("command %s is moved to %s",e.name,s);o=Number(t);if(c.slots[t]){c.slots[t][0]=s}else{c.slots[t]=[s]}c._groupsBySlot[t]=c._groupsIds[c.slots[t].join(";")];c.connectionPool.findOrCreate(c.natMapper(s));tryConnection();C("refreshing slot caches... (triggered by MOVED error)");c.refreshSlotsCache()},ask:function(t,s){C("command %s is required to ask %s:%s",e.name,s);const r=c.natMapper(s);c.connectionPool.findOrCreate(r);tryConnection(false,`${r.host}:${r.port}`)},tryagain:r,clusterDown:r,connectionClosed:r,maxRedirections:function(s){t.call(e,s)},defaults:function(){t.call(e,s)}})}}tryConnection();function tryConnection(r,l){if(c.status==="end"){e.reject(new i.AbortError("Cluster is ended."));return}let u;if(c.status==="ready"||e.name==="cluster"){if(s&&s.redis){u=s.redis}else if(a.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||a.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){u=c.subscriber.getInstance();if(!u){e.reject(new i.AbortError("No subscriber for the cluster"));return}}else{if(!r){if(typeof o==="number"&&c.slots[o]){const t=c.slots[o];if(typeof n==="function"){const s=t.map((function(e){return c.connectionPool.getInstanceByKey(e)}));u=n(s,e);if(Array.isArray(u)){u=(0,h.sample)(u)}if(!u){u=s[0]}}else{let e;if(n==="all"){e=(0,h.sample)(t)}else if(n==="slave"&&t.length>1){e=(0,h.sample)(t,1)}else{e=t[0]}u=c.connectionPool.getInstanceByKey(e)}}if(l){u=c.connectionPool.getInstanceByKey(l);u.asking()}}if(!u){u=(typeof n==="function"?null:c.connectionPool.getSampleInstance(n))||c.connectionPool.getSampleInstance("all")}}if(s&&!s.redis){s.redis=u}}if(u){u.sendCommand(e,t)}else if(c.options.enableOfflineQueue){c.offlineQueue.push({command:e,stream:t,node:s})}else{e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}}return e.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,s){if(typeof t.value==="undefined"){t.value=this.options.maxRedirections}else{t.value-=1}if(t.value<=0){s.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}const r=e.message.split(" ");if(r[0]==="MOVED"){const e=this.options.retryDelayOnMoved;if(e&&typeof e==="number"){this.delayQueue.push("moved",s.moved.bind(null,r[1],r[2]),{timeout:e})}else{s.moved(r[1],r[2])}}else if(r[0]==="ASK"){s.ask(r[1],r[2])}else if(r[0]==="TRYAGAIN"){this.delayQueue.push("tryagain",s.tryagain,{timeout:this.options.retryDelayOnTryAgain})}else if(r[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0){this.delayQueue.push("clusterdown",s.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)})}else if(e.message===h.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"){this.delayQueue.push("failover",s.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)})}else{s.defaults()}}resetOfflineQueue(){this.offlineQueue=new k}clearNodesRefreshInterval(){if(this.slotsTimer){clearTimeout(this.slotsTimer);this.slotsTimer=null}}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval){return}const nextRound=()=>{this.slotsTimer=setTimeout((()=>{C('refreshing slot caches... (triggered by "slotsRefreshInterval" option)');this.refreshSlotsCache((()=>{nextRound()}))}),this.options.slotsRefreshInterval)};nextRound()}setStatus(e){C("status: %s -> %s",this.status||"[empty]",e);this.status=e;process.nextTick((()=>{this.emit(e)}))}handleCloseEvent(e){if(e){C("closed because %s",e)}let t;if(!this.manuallyClosing&&typeof this.options.clusterRetryStrategy==="function"){t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)}if(typeof t==="number"){this.setStatus("reconnecting");this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=null;C("Cluster is disconnected. Retrying after %dms",t);this.connect().catch((function(e){C("Got error %s when reconnecting. Ignoring...",e)}))}),t)}else{this.setStatus("end");this.flushQueue(new Error("None of startup nodes is available"))}}flushQueue(e){let t;while(t=this.offlineQueue.shift()){t.command.reject(e)}}executeOfflineCommands(){if(this.offlineQueue.length){C("send %d commands in offline queue",this.offlineQueue.length);const e=this.offlineQueue;this.resetOfflineQueue();let t;while(t=e.shift()){this.sendCommand(t.command,t.stream,t.node)}}}natMapper(e){if(this.options.natMap&&typeof this.options.natMap==="object"){const t=typeof e==="string"?e:`${e.host}:${e.port}`;const s=this.options.natMap[t];if(s){C("NAT mapping %s -> %O",t,s);return Object.assign({},s)}}return typeof e==="string"?(0,S.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e){return t(new Error("Node is disconnected"))}const s=e.duplicate({enableOfflineQueue:true,enableReadyCheck:false,retryStrategy:null,connectionName:(0,S.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});s.on("error",h.noop);s.cluster("SLOTS",(0,h.timeout)(((e,r)=>{s.disconnect();if(e){return t(e)}if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){C("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",r.length,this.status);t();return}const n=[];C("cluster slots result count: %d",r.length);for(let e=0;e<r.length;++e){const t=r[e];const s=t[0];const i=t[1];const o=[];for(let e=2;e<t.length;e++){if(!t[e][0]){continue}const s=this.natMapper({host:t[e][0],port:t[e][1]});s.readOnly=e!==2;n.push(s);o.push(s.host+":"+s.port)}C("cluster slots result [%d]: slots %d~%d served by %s",e,s,i,o);for(let e=s;e<=i;e++){this.slots[e]=o}}this._groupsIds=Object.create(null);let i=0;for(let e=0;e<16384;e++){const t=(this.slots[e]||[]).join(";");if(!t.length){this._groupsBySlot[e]=undefined;continue}if(!this._groupsIds[t]){this._groupsIds[t]=++i}this._groupsBySlot[e]=this._groupsIds[t]}this.connectionPool.reset(n);t()}),this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(const t of this._readyDelayedCallbacks){process.nextTick(t,e)}this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",((t,s)=>{if(t){return e(t)}if(typeof s!=="string"){return e()}let r;const n=s.split("\r\n");for(let e=0;e<n.length;++e){const t=n[e].split(":");if(t[0]==="cluster_state"){r=t[1];break}}if(r==="fail"){C("cluster state not ok (%s)",r);e(null,r)}else{e()}}))}resolveSrv(e){return new Promise(((t,s)=>{this.options.resolveSrv(e,((e,r)=>{if(e){return s(e)}const n=this,i=(0,S.groupSrvRecords)(r),o=Object.keys(i).sort(((e,t)=>parseInt(e)-parseInt(t)));function tryFirstOne(e){if(!o.length){return s(e)}const r=o[0],a=i[r],l=(0,S.weightSrvRecords)(a);if(!a.records.length){o.shift()}n.dnsLookup(l.name).then((e=>t({host:e,port:l.port})),tryFirstOne)}tryFirstOne()}))}))}dnsLookup(e){return new Promise(((t,s)=>{this.options.dnsLookup(e,((r,n)=>{if(r){C("failed to resolve hostname %s to IP: %s",e,r.message);s(r)}else{C("resolved hostname %s to IP %s",e,n);t(n)}}))}))}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0){throw new Error("`startupNodes` should contain at least one node.")}const e=(0,S.normalizeNodeOptions)(this.startupNodes);const t=(0,S.getUniqueHostnamesFromOptions)(e);if(t.length===0){return e}const s=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this)));const r=(0,h.zipMap)(t,s);return e.map((e=>{const t=r.get(e.host);if(!t){return e}if(this.options.useSRVRecords){return Object.assign({},e,t)}return Object.assign({},e,{host:t})}))}createScanStream(e,{key:t,options:s={}}){return new u.default({objectMode:true,key:t,redis:this,command:e,...s})}}(0,p.default)(Cluster,n.EventEmitter);(0,f.addTransactionSupport)(Cluster.prototype);t["default"]=Cluster},2892:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getConnectionName=t.weightSrvRecords=t.groupSrvRecords=t.getUniqueHostnamesFromOptions=t.normalizeNodeOptions=t.nodeKeyToRedisOptions=t.getNodeKey=void 0;const r=s(5577);const n=s(1808);function getNodeKey(e){e.port=e.port||6379;e.host=e.host||"127.0.0.1";return e.host+":"+e.port}t.getNodeKey=getNodeKey;function nodeKeyToRedisOptions(e){const t=e.lastIndexOf(":");if(t===-1){throw new Error(`Invalid node key ${e}`)}return{host:e.slice(0,t),port:Number(e.slice(t+1))}}t.nodeKeyToRedisOptions=nodeKeyToRedisOptions;function normalizeNodeOptions(e){return e.map((e=>{const t={};if(typeof e==="object"){Object.assign(t,e)}else if(typeof e==="string"){Object.assign(t,(0,r.parseURL)(e))}else if(typeof e==="number"){t.port=e}else{throw new Error("Invalid argument "+e)}if(typeof t.port==="string"){t.port=parseInt(t.port,10)}delete t.db;if(!t.port){t.port=6379}if(!t.host){t.host="127.0.0.1"}return(0,r.resolveTLSProfile)(t)}))}t.normalizeNodeOptions=normalizeNodeOptions;function getUniqueHostnamesFromOptions(e){const t={};e.forEach((e=>{t[e.host]=true}));return Object.keys(t).filter((e=>!(0,n.isIP)(e)))}t.getUniqueHostnamesFromOptions=getUniqueHostnamesFromOptions;function groupSrvRecords(e){const t={};for(const s of e){if(!t.hasOwnProperty(s.priority)){t[s.priority]={totalWeight:s.weight,records:[s]}}else{t[s.priority].totalWeight+=s.weight;t[s.priority].records.push(s)}}return t}t.groupSrvRecords=groupSrvRecords;function weightSrvRecords(e){if(e.records.length===1){e.totalWeight=0;return e.records.shift()}const t=Math.floor(Math.random()*(e.totalWeight+e.records.length));let s=0;for(const[r,n]of e.records.entries()){s+=1+n.weight;if(s>t){e.totalWeight-=n.weight;e.records.splice(r,1);return n}}}t.weightSrvRecords=weightSrvRecords;function getConnectionName(e,t){const s=`ioredis-cluster(${e})`;return t?`${s}:${t}`:s}t.getConnectionName=getConnectionName},3431:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(5577);const n=(0,r.Debug)("AbstractConnector");class AbstractConnector{constructor(e){this.connecting=false;this.disconnectTimeout=e}check(e){return true}disconnect(){this.connecting=false;if(this.stream){const e=this.stream;const t=setTimeout((()=>{n("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort);e.destroy()}),this.disconnectTimeout);e.on("close",(()=>clearTimeout(t)));e.end()}}}t["default"]=AbstractConnector},5494:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FailoverDetector=void 0;const r=s(5577);const n=(0,r.Debug)("FailoverDetector");const i="+switch-master";class FailoverDetector{constructor(e,t){this.isDisconnected=false;this.connector=e;this.sentinels=t}cleanup(){this.isDisconnected=true;for(const e of this.sentinels){e.client.disconnect()}}async subscribe(){n("Starting FailoverDetector");const e=[];for(const t of this.sentinels){const s=t.client.subscribe(i).catch((e=>{n("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,e.message)}));e.push(s);t.client.on("message",(e=>{if(!this.isDisconnected&&e===i){this.disconnect()}}))}await Promise.all(e)}disconnect(){this.isDisconnected=true;n("Failover detected, disconnecting");this.connector.disconnect()}}t.FailoverDetector=FailoverDetector},5473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function isSentinelEql(e,t){return(e.host||"127.0.0.1")===(t.host||"127.0.0.1")&&(e.port||26379)===(t.port||26379)}class SentinelIterator{constructor(e){this.cursor=0;this.sentinels=e.slice(0)}next(){const e=this.cursor>=this.sentinels.length;return{done:e,value:e?undefined:this.sentinels[this.cursor++]}}reset(e){if(e&&this.sentinels.length>1&&this.cursor!==1){this.sentinels.unshift(...this.sentinels.splice(this.cursor-1))}this.cursor=0}add(e){for(let t=0;t<this.sentinels.length;t++){if(isSentinelEql(e,this.sentinels[t])){return false}}this.sentinels.push(e);return true}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}}t["default"]=SentinelIterator},5202:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SentinelIterator=void 0;const r=s(1808);const n=s(5577);const i=s(4404);const o=s(5473);t.SentinelIterator=o.default;const a=s(3431);const l=s(7865);const c=s(5494);const u=(0,n.Debug)("SentinelConnector");class SentinelConnector extends a.default{constructor(e){super(e.disconnectTimeout);this.options=e;this.emitter=null;this.failoverDetector=null;if(!this.options.sentinels.length){throw new Error("Requires at least one sentinel to connect to.")}if(!this.options.name){throw new Error("Requires the name of master.")}this.sentinelIterator=new o.default(this.options.sentinels)}check(e){const t=!e.role||this.options.role===e.role;if(!t){u("role invalid, expected %s, but got %s",this.options.role,e.role);this.sentinelIterator.next();this.sentinelIterator.next();this.sentinelIterator.reset(true)}return t}disconnect(){super.disconnect();if(this.failoverDetector){this.failoverDetector.cleanup()}}connect(e){this.connecting=true;this.retryAttempts=0;let t;const connectToNext=async()=>{const s=this.sentinelIterator.next();if(s.done){this.sentinelIterator.reset(false);const s=typeof this.options.sentinelRetryStrategy==="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null;let r=typeof s!=="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${s}ms.`;if(t){r+=` Last error: ${t.message}`}u(r);const n=new Error(r);if(typeof s==="number"){e("error",n);await new Promise((e=>setTimeout(e,s)));return connectToNext()}else{throw n}}let o=null;let a=null;try{o=await this.resolve(s.value)}catch(e){a=e}if(!this.connecting){throw new Error(n.CONNECTION_CLOSED_ERROR_MSG)}const l=s.value.host+":"+s.value.port;if(o){u("resolved: %s:%s from sentinel %s",o.host,o.port,l);if(this.options.enableTLSForSentinelMode&&this.options.tls){Object.assign(o,this.options.tls);this.stream=(0,i.connect)(o);this.stream.once("secureConnect",this.initFailoverDetector.bind(this))}else{this.stream=(0,r.createConnection)(o);this.stream.once("connect",this.initFailoverDetector.bind(this))}this.stream.once("error",(e=>{this.firstError=e}));return this.stream}else{const s=a?"failed to connect to sentinel "+l+" because "+a.message:"connected to sentinel "+l+" successfully, but got an invalid reply: "+o;u(s);e("sentinelError",new Error(s));if(a){t=a}return connectToNext()}};return connectToNext()}async updateSentinels(e){if(!this.options.updateSentinels){return}const t=await e.sentinel("sentinels",this.options.name);if(!Array.isArray(t)){return}t.map(n.packObject).forEach((e=>{const t=e.flags?e.flags.split(","):[];if(t.indexOf("disconnected")===-1&&e.ip&&e.port){const t=this.sentinelNatResolve(addressResponseToAddress(e));if(this.sentinelIterator.add(t)){u("adding sentinel %s:%s",t.host,t.port)}}}));u("Updated internal sentinels: %s",this.sentinelIterator)}async resolveMaster(e){const t=await e.sentinel("get-master-addr-by-name",this.options.name);await this.updateSentinels(e);return this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){const t=await e.sentinel("slaves",this.options.name);if(!Array.isArray(t)){return null}const s=t.map(n.packObject).filter((e=>e.flags&&!e.flags.match(/(disconnected|s_down|o_down)/)));return this.sentinelNatResolve(selectPreferredSentinel(s,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;return this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,t){const s=new l.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?undefined:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:false,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t});return s}async resolve(e){const t=this.connectToSentinel(e);t.on("error",noop);try{if(this.options.role==="slave"){return await this.resolveSlave(t)}else{return await this.resolveMaster(t)}}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector){return}this.sentinelIterator.reset(true);const t=[];while(t.length<this.options.sentinelMaxConnections){const{done:e,value:s}=this.sentinelIterator.next();if(e){break}const r=this.connectToSentinel(s,{lazyConnect:true,retryStrategy:this.options.sentinelReconnectStrategy});r.on("reconnecting",(()=>{var e;(e=this.emitter)===null||e===void 0?void 0:e.emit("sentinelReconnecting")}));t.push({address:s,client:r})}this.sentinelIterator.reset(false);if(this.failoverDetector){this.failoverDetector.cleanup()}this.failoverDetector=new c.FailoverDetector(this,t);await this.failoverDetector.subscribe();(e=this.emitter)===null||e===void 0?void 0:e.emit("failoverSubscribed")}}t["default"]=SentinelConnector;function selectPreferredSentinel(e,t){if(e.length===0){return null}let s;if(typeof t==="function"){s=t(e)}else if(t!==null&&typeof t==="object"){const r=Array.isArray(t)?t:[t];r.sort(((e,t)=>{if(!e.prio){e.prio=1}if(!t.prio){t.prio=1}if(e.prio<t.prio){return-1}if(e.prio>t.prio){return 1}return 0}));for(let t=0;t<r.length;t++){for(let n=0;n<e.length;n++){const i=e[n];if(i.ip===r[t].ip){if(i.port===r[t].port){s=i;break}}}if(s){break}}}if(!s){s=(0,n.sample)(e)}return addressResponseToAddress(s)}function addressResponseToAddress(e){return{host:e.ip,port:Number(e.port)}}function noop(){}},5783:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(1808);const n=s(4404);const i=s(5577);const o=s(3431);class StandaloneConnector extends o.default{constructor(e){super(e.disconnectTimeout);this.options=e}connect(e){const{options:t}=this;this.connecting=true;let s;if("path"in t&&t.path){s={path:t.path}}else{s={};if("port"in t&&t.port!=null){s.port=t.port}if("host"in t&&t.host!=null){s.host=t.host}if("family"in t&&t.family!=null){s.family=t.family}}if(t.tls){Object.assign(s,t.tls)}return new Promise(((e,o)=>{process.nextTick((()=>{if(!this.connecting){o(new Error(i.CONNECTION_CLOSED_ERROR_MSG));return}try{if(t.tls){this.stream=(0,n.connect)(s)}else{this.stream=(0,r.createConnection)(s)}}catch(e){o(e);return}this.stream.once("error",(e=>{this.firstError=e}));e(this.stream)}))}))}}t["default"]=StandaloneConnector},9317:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SentinelConnector=t.StandaloneConnector=void 0;const r=s(5783);t.StandaloneConnector=r.default;const n=s(5202);t.SentinelConnector=n.default},398:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const s=`-----BEGIN CERTIFICATE-----\nMIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV\nBAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1\ndGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP\nJnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz\nrmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E\nQwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2\nBDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3\nTMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp\n4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w\nMB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w\nDQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta\nlbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6\nSu8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ\nuFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k\nBpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp\nZ4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx\nCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w\nKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN\nMTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG\nA1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy\nbWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA\nA4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv\nTq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4\nVuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym\nhjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W\nP0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN\nr0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw\nhhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s\nUzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u\nP1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9\nMjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT\nt5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID\nAQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy\nLnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw\nAYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G\nA1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4\nL2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB\nhjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr\nAP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW\nvcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw\n7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+\nXoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc\nAUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1\njQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh\n/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z\nzDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli\niF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43\niqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo\n616pxqo=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV\nBAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz\nTGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y\naXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC\nVVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz\nMS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw\nggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1\nG5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY\nDm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl\npp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT\nULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag\n54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ\nxeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC\nJpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K\n2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3\nStsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI\nSIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B\ncS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL\nyzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T\nAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg\nz5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu\nrYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3\n3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+\nhSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ\nD0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj\nTY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l\nFXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj\nmcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf\nybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji\nn8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F\nUhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM\nMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv\nYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y\nNTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu\nIG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy\nMDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf\n8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD\nBVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg\nofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK\ndZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh\ncounQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu\njE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG\nCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW\nBBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj\nmove4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw\nMi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1\ncmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w\nK6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD\nVR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC\nAQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/\n3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY\n0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX\ny+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3\n15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5\nZgKnO/Fx2hBgTxhOTMYaD312kg==\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G\nA1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp\nZ24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4\nMTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG\nA1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI\nhvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8\nRgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT\ngHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm\nKPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd\nQQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ\nXriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw\nDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o\nLkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU\nRUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp\njjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK\n6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX\nmcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs\nMx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH\nWD9f\n-----END CERTIFICATE-----`;const r={RedisCloudFixed:{ca:s},RedisCloudFlexible:{ca:s}};t["default"]=r},3601:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(8395);class ClusterAllFailedError extends r.RedisError{constructor(e,t){super(e);this.lastNodeError=t;Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}t["default"]=ClusterAllFailedError;ClusterAllFailedError.defaultMessage="Failed to refresh slots cache."},4249:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(8395);class MaxRetriesPerRequestError extends r.AbortError{constructor(e){const t=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(t);Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}t["default"]=MaxRetriesPerRequestError},8144:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MaxRetriesPerRequestError=void 0;const r=s(4249);t.MaxRetriesPerRequestError=r.default},9597:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.print=t.ReplyError=t.SentinelIterator=t.SentinelConnector=t.AbstractConnector=t.Pipeline=t.ScanStream=t.Command=t.Cluster=t["default"]=void 0;t=e.exports=s(7865)["default"];var r=s(7865);Object.defineProperty(t,"default",{enumerable:true,get:function(){return r.default}});var n=s(2496);Object.defineProperty(t,"Cluster",{enumerable:true,get:function(){return n.default}});var i=s(5717);Object.defineProperty(t,"Command",{enumerable:true,get:function(){return i.default}});var o=s(6354);Object.defineProperty(t,"ScanStream",{enumerable:true,get:function(){return o.default}});var a=s(6822);Object.defineProperty(t,"Pipeline",{enumerable:true,get:function(){return a.default}});var l=s(3431);Object.defineProperty(t,"AbstractConnector",{enumerable:true,get:function(){return l.default}});var c=s(5202);Object.defineProperty(t,"SentinelConnector",{enumerable:true,get:function(){return c.default}});Object.defineProperty(t,"SentinelIterator",{enumerable:true,get:function(){return c.SentinelIterator}});t.ReplyError=s(8395).ReplyError;Object.defineProperty(t,"Promise",{get(){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.");return Promise},set(e){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function print(e,t){if(e){console.log("Error: "+e)}else{console.log("Reply: "+t)}}t.print=print},6990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DEFAULT_REDIS_OPTIONS=void 0;t.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(e){return Math.min(e*50,2e3)},keepAlive:0,noDelay:true,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(e){return Math.min(e*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:false,updateSentinels:true,failoverDetector:false,username:null,password:null,db:0,enableOfflineQueue:true,enableReadyCheck:true,autoResubscribe:true,autoResendUnfulfilledCommands:true,lazyConnect:false,keyPrefix:"",reconnectOnError:null,readOnly:false,stringNumbers:false,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:false,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}},5234:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.readyHandler=t.errorHandler=t.closeHandler=t.connectHandler=void 0;const r=s(8395);const n=s(5717);const i=s(8144);const o=s(5577);const a=s(5188);const l=(0,o.Debug)("connection");function connectHandler(e){return function(){e.setStatus("connect");e.resetCommandQueue();let s=false;const{connectionEpoch:r}=e;if(e.condition.auth){e.auth(e.condition.auth,(function(t){if(r!==e.connectionEpoch){return}if(t){if(t.message.indexOf("no password is set")!==-1){console.warn("[WARN] Redis server does not require a password, but a password was supplied.")}else if(t.message.indexOf("without any password configured for the default user")!==-1){console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied")}else if(t.message.indexOf("wrong number of arguments for 'auth' command")!==-1){console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`)}else{s=true;e.recoverFromFatalError(t,t)}}}))}if(e.condition.select){e.select(e.condition.select).catch((t=>{e.silentEmit("error",t)}))}if(!e.options.enableReadyCheck){t.readyHandler(e)()}new a.default(e,{stringNumbers:e.options.stringNumbers});if(e.options.enableReadyCheck){e._readyCheck((function(n,i){if(r!==e.connectionEpoch){return}if(n){if(!s){e.recoverFromFatalError(new Error("Ready check failed: "+n.message),n)}}else{if(e.connector.check(i)){t.readyHandler(e)()}else{e.disconnect(true)}}}))}}}t.connectHandler=connectHandler;function abortError(e){const t=new r.AbortError("Command aborted due to connection close");t.command={name:e.name,args:e.args};return t}function abortIncompletePipelines(e){let t=0;for(let s=0;s<e.length;){const r=e.peekAt(s).command;const n=r.pipelineIndex;if(n===undefined||n===0){t=0}if(n!==undefined&&n!==t++){e.remove(s,1);r.reject(abortError(r));continue}s++}}function abortTransactionFragments(e){for(let t=0;t<e.length;){const s=e.peekAt(t).command;if(s.name==="multi"){break}if(s.name==="exec"){e.remove(t,1);s.reject(abortError(s));break}if(s.inTransaction){e.remove(t,1);s.reject(abortError(s))}else{t++}}}function closeHandler(e){return function(){e.setStatus("close");if(!e.prevCondition){e.prevCondition=e.condition}if(e.commandQueue.length){abortIncompletePipelines(e.commandQueue);e.prevCommandQueue=e.commandQueue}if(e.offlineQueue.length){abortTransactionFragments(e.offlineQueue)}if(e.manuallyClosing){e.manuallyClosing=false;l("skip reconnecting since the connection is manually closed.");return close()}if(typeof e.options.retryStrategy!=="function"){l("skip reconnecting because `retryStrategy` is not a function");return close()}const t=e.options.retryStrategy(++e.retryAttempts);if(typeof t!=="number"){l("skip reconnecting because `retryStrategy` doesn't return a number");return close()}l("reconnect in %sms",t);e.setStatus("reconnecting",t);e.reconnectTimeout=setTimeout((function(){e.reconnectTimeout=null;e.connect().catch(o.noop)}),t);const{maxRetriesPerRequest:s}=e.options;if(typeof s==="number"){if(s<0){l("maxRetriesPerRequest is negative, ignoring...")}else{const t=e.retryAttempts%(s+1);if(t===0){l("reach maxRetriesPerRequest limitation, flushing command queue...");e.flushQueue(new i.MaxRetriesPerRequestError(s))}}}};function close(){e.setStatus("end");e.flushQueue(new Error(o.CONNECTION_CLOSED_ERROR_MSG))}}t.closeHandler=closeHandler;function errorHandler(e){return function(t){l("error: %s",t);e.silentEmit("error",t)}}t.errorHandler=errorHandler;function readyHandler(e){return function(){e.setStatus("ready");e.retryAttempts=0;if(e.options.monitor){e.call("monitor").then((()=>e.setStatus("monitoring")),(t=>e.emit("error",t)));const{sendCommand:t}=e;e.sendCommand=function(s){if(n.default.checkFlag("VALID_IN_MONITOR_MODE",s.name)){return t.call(e,s)}s.reject(new Error("Connection is in monitoring mode, can't process commands."));return s.promise};e.once("close",(function(){delete e.sendCommand}));return}const t=e.prevCondition?e.prevCondition.select:e.condition.select;if(e.options.connectionName){l("set the connection name [%s]",e.options.connectionName);e.client("setname",e.options.connectionName).catch(o.noop)}if(e.options.readOnly){l("set the connection to readonly mode");e.readonly().catch(o.noop)}if(e.prevCondition){const s=e.prevCondition;e.prevCondition=null;if(s.subscriber&&e.options.autoResubscribe){if(e.condition.select!==t){l("connect to db [%d]",t);e.select(t)}const r=s.subscriber.channels("subscribe");if(r.length){l("subscribe %d channels",r.length);e.subscribe(r)}const n=s.subscriber.channels("psubscribe");if(n.length){l("psubscribe %d channels",n.length);e.psubscribe(n)}}}if(e.prevCommandQueue){if(e.options.autoResendUnfulfilledCommands){l("resend %d unfulfilled commands",e.prevCommandQueue.length);while(e.prevCommandQueue.length>0){const t=e.prevCommandQueue.shift();if(t.select!==e.condition.select&&t.command.name!=="select"){e.select(t.select)}e.sendCommand(t.command,t.stream)}}else{e.prevCommandQueue=null}}if(e.offlineQueue.length){l("send %d commands in offline queue",e.offlineQueue.length);const t=e.offlineQueue;e.resetOfflineQueue();while(t.length>0){const s=t.shift();if(s.select!==e.condition.select&&s.command.name!=="select"){e.select(s.select)}e.sendCommand(s.command,s.stream)}}if(e.condition.select!==t){l("connect to db [%d]",t);e.select(t)}}}t.readyHandler=readyHandler},2856:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addTransactionSupport=void 0;const r=s(5577);const n=s(3986);const i=s(6822);function addTransactionSupport(e){e.pipeline=function(e){const t=new i.default(this);if(Array.isArray(e)){t.addBatch(e)}return t};const{multi:t}=e;e.multi=function(e,s){if(typeof s==="undefined"&&!Array.isArray(e)){s=e;e=null}if(s&&s.pipeline===false){return t.call(this)}const o=new i.default(this);o.multi();if(Array.isArray(e)){o.addBatch(e)}const a=o.exec;o.exec=function(e){if(this.isCluster&&!this.redis.slots.length){if(this.redis.status==="wait")this.redis.connect().catch(r.noop);return(0,n.default)(new Promise(((e,t)=>{this.redis.delayUntilReady((s=>{if(s){t(s);return}this.exec(o).then(e,t)}))})),e)}if(this._transactions>0){a.call(o)}if(this.nodeifiedPromise){return a.call(o)}const t=a.call(o);return(0,n.default)(t.then((function(e){const t=e[e.length-1];if(typeof t==="undefined"){throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.")}if(t[0]){t[0].previousErrors=[];for(let s=0;s<e.length-1;++s){if(e[s][0]){t[0].previousErrors.push(e[s][0])}}throw t[0]}return(0,r.wrapMultiResult)(t[1])})),e)};const{execBuffer:l}=o;o.execBuffer=function(e){if(this._transactions>0){l.call(o)}return o.exec(e)};return o};const{exec:s}=e;e.exec=function(e){return(0,n.default)(s.call(this).then((function(e){if(Array.isArray(e)){e=(0,r.wrapMultiResult)(e)}return e})),e)}}t.addTransactionSupport=addTransactionSupport},6273:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(901);const n=s(8279);const i=s(5717);const o=s(3093);class Commander{constructor(){this.options={};this.scriptsSet={};this.addedBuiltinSet=new Set}getBuiltinCommands(){return a.slice(0)}createBuiltinCommand(e){return{string:generateFunction(null,e,"utf8"),buffer:generateFunction(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e);this[e]=generateFunction(e,e,"utf8");this[e+"Buffer"]=generateFunction(e+"Buffer",e,null)}defineCommand(e,t){const s=new o.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=s;this[e]=generateScriptingFunction(e,e,s,"utf8");this[e+"Buffer"]=generateScriptingFunction(e+"Buffer",e,s,null)}sendCommand(e,t,s){throw new Error('"sendCommand" is not implemented')}}const a=r.list.filter((e=>e!=="monitor"));a.push("sentinel");a.forEach((function(e){Commander.prototype[e]=generateFunction(e,e,"utf8");Commander.prototype[e+"Buffer"]=generateFunction(e+"Buffer",e,null)}));Commander.prototype.call=generateFunction("call","utf8");Commander.prototype.callBuffer=generateFunction("callBuffer",null);Commander.prototype.send_command=Commander.prototype.call;function generateFunction(e,t,s){if(typeof s==="undefined"){s=t;t=null}return function(...r){const o=t||r.shift();let a=r[r.length-1];if(typeof a==="function"){r.pop()}else{a=undefined}const l={errorStack:this.options.showFriendlyErrorStack?new Error:undefined,keyPrefix:this.options.keyPrefix,replyEncoding:s};if(!(0,n.shouldUseAutoPipelining)(this,e,o)){return this.sendCommand(new i.default(o,r,l,a))}return(0,n.executeWithAutoPipelining)(this,e,o,r,a)}}function generateScriptingFunction(e,t,s,r){return function(...i){const o=typeof i[i.length-1]==="function"?i.pop():undefined;const a={replyEncoding:r};if(this.options.showFriendlyErrorStack){a.errorStack=new Error}if(!(0,n.shouldUseAutoPipelining)(this,e,t)){return s.execute(this,i,a,o)}return(0,n.executeWithAutoPipelining)(this,e,t,i,o)}}t["default"]=Commander},7323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function applyMixin(e,t){Object.getOwnPropertyNames(t.prototype).forEach((s=>{Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s))}))}t["default"]=applyMixin},7389:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.genRedactedString=t.getStringValue=t.MAX_ARGUMENT_LENGTH=void 0;const r=s(9438);const n=200;t.MAX_ARGUMENT_LENGTH=n;const i="ioredis";function getStringValue(e){if(e===null){return}switch(typeof e){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(e)){return e.toString("hex")}if(Array.isArray(e)){return e.join(",")}try{return JSON.stringify(e)}catch(e){return}case"string":return e}}t.getStringValue=getStringValue;function genRedactedString(e,t){const{length:s}=e;return s<=t?e:e.slice(0,t)+' ... <REDACTED full-length="'+s+'">'}t.genRedactedString=genRedactedString;function genDebugFunction(e){const t=(0,r.default)(`${i}:${e}`);function wrappedDebug(...e){if(!t.enabled){return}for(let t=1;t<e.length;t++){const s=getStringValue(e[t]);if(typeof s==="string"&&s.length>n){e[t]=genRedactedString(s,n)}}return t.apply(null,e)}Object.defineProperties(wrappedDebug,{namespace:{get(){return t.namespace}},enabled:{get(){return t.enabled}},destroy:{get(){return t.destroy}},log:{get(){return t.log},set(e){t.log=e}}});return wrappedDebug}t["default"]=genDebugFunction},5577:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.noop=t.defaults=t.Debug=t.zipMap=t.CONNECTION_CLOSED_ERROR_MSG=t.shuffle=t.sample=t.resolveTLSProfile=t.parseURL=t.optimizeErrorStack=t.toArg=t.convertMapToArray=t.convertObjectToArray=t.timeout=t.packObject=t.isInt=t.wrapMultiResult=t.convertBufferToString=void 0;const r=s(7310);const n=s(8560);Object.defineProperty(t,"defaults",{enumerable:true,get:function(){return n.defaults}});Object.defineProperty(t,"noop",{enumerable:true,get:function(){return n.noop}});const i=s(7389);t.Debug=i.default;const o=s(398);function convertBufferToString(e,t){if(e instanceof Buffer){return e.toString(t)}if(Array.isArray(e)){const s=e.length;const r=Array(s);for(let n=0;n<s;++n){r[n]=e[n]instanceof Buffer&&t==="utf8"?e[n].toString():convertBufferToString(e[n],t)}return r}return e}t.convertBufferToString=convertBufferToString;function wrapMultiResult(e){if(!e){return null}const t=[];const s=e.length;for(let r=0;r<s;++r){const s=e[r];if(s instanceof Error){t.push([s])}else{t.push([null,s])}}return t}t.wrapMultiResult=wrapMultiResult;function isInt(e){const t=parseFloat(e);return!isNaN(e)&&(t|0)===t}t.isInt=isInt;function packObject(e){const t={};const s=e.length;for(let r=1;r<s;r+=2){t[e[r-1]]=e[r]}return t}t.packObject=packObject;function timeout(e,t){let s=null;const run=function(){if(s){clearTimeout(s);s=null;e.apply(this,arguments)}};s=setTimeout(run,t,new Error("timeout"));return run}t.timeout=timeout;function convertObjectToArray(e){const t=[];const s=Object.keys(e);for(let r=0,n=s.length;r<n;r++){t.push(s[r],e[s[r]])}return t}t.convertObjectToArray=convertObjectToArray;function convertMapToArray(e){const t=[];let s=0;e.forEach((function(e,r){t[s]=r;t[s+1]=e;s+=2}));return t}t.convertMapToArray=convertMapToArray;function toArg(e){if(e===null||typeof e==="undefined"){return""}return String(e)}t.toArg=toArg;function optimizeErrorStack(e,t,s){const r=t.split("\n");let n="";let i;for(i=1;i<r.length;++i){if(r[i].indexOf(s)===-1){break}}for(let e=i;e<r.length;++e){n+="\n"+r[e]}const o=e.stack.indexOf("\n");e.stack=e.stack.slice(0,o)+n;return e}t.optimizeErrorStack=optimizeErrorStack;function parseURL(e){if(isInt(e)){return{port:e}}let t=(0,r.parse)(e,true,true);if(!t.slashes&&e[0]!=="/"){e="//"+e;t=(0,r.parse)(e,true,true)}const s=t.query||{};const i={};if(t.auth){const e=t.auth.indexOf(":");i.username=e===-1?t.auth:t.auth.slice(0,e);i.password=e===-1?"":t.auth.slice(e+1)}if(t.pathname){if(t.protocol==="redis:"||t.protocol==="rediss:"){if(t.pathname.length>1){i.db=t.pathname.slice(1)}}else{i.path=t.pathname}}if(t.host){i.host=t.hostname}if(t.port){i.port=t.port}(0,n.defaults)(i,s);return i}t.parseURL=parseURL;function resolveTLSProfile(e){let t=e===null||e===void 0?void 0:e.tls;if(typeof t==="string")t={profile:t};const s=o.default[t===null||t===void 0?void 0:t.profile];if(s){t=Object.assign({},s,t);delete t.profile;e=Object.assign({},e,{tls:t})}return e}t.resolveTLSProfile=resolveTLSProfile;function sample(e,t=0){const s=e.length;if(t>=s){return}return e[t+Math.floor(Math.random()*(s-t))]}t.sample=sample;function shuffle(e){let t=e.length;while(t>0){const s=Math.floor(Math.random()*t);t--;[e[t],e[s]]=[e[s],e[t]]}return e}t.shuffle=shuffle;t.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function zipMap(e,t){const s=new Map;e.forEach(((e,r)=>{s.set(e,t[r])}));return s}t.zipMap=zipMap},8560:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isArguments=t.defaults=t.noop=void 0;const r=s(3072);t.defaults=r;const n=s(718);t.isArguments=n;function noop(){}t.noop=noop},3072:e=>{var t=9007199254740991;var s="[object Arguments]",r="[object Function]",n="[object GeneratorFunction]";var i=/^(?:0|[1-9]\d*)$/;function apply(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}function baseTimes(e,t){var s=-1,r=Array(e);while(++s<e){r[s]=t(s)}return r}var o=Object.prototype;var a=o.hasOwnProperty;var l=o.toString;var c=o.propertyIsEnumerable;var u=Math.max;function arrayLikeKeys(e,t){var s=f(e)||isArguments(e)?baseTimes(e.length,String):[];var r=s.length,n=!!r;for(var i in e){if((t||a.call(e,i))&&!(n&&(i=="length"||isIndex(i,r)))){s.push(i)}}return s}function assignInDefaults(e,t,s,r){if(e===undefined||eq(e,o[s])&&!a.call(r,s)){return t}return e}function assignValue(e,t,s){var r=e[t];if(!(a.call(e,t)&&eq(r,s))||s===undefined&&!(t in e)){e[t]=s}}function baseKeysIn(e){if(!isObject(e)){return nativeKeysIn(e)}var t=isPrototype(e),s=[];for(var r in e){if(!(r=="constructor"&&(t||!a.call(e,r)))){s.push(r)}}return s}function baseRest(e,t){t=u(t===undefined?e.length-1:t,0);return function(){var s=arguments,r=-1,n=u(s.length-t,0),i=Array(n);while(++r<n){i[r]=s[t+r]}r=-1;var o=Array(t+1);while(++r<t){o[r]=s[r]}o[t]=i;return apply(e,this,o)}}function copyObject(e,t,s,r){s||(s={});var n=-1,i=t.length;while(++n<i){var o=t[n];var a=r?r(s[o],e[o],o,s,e):undefined;assignValue(s,o,a===undefined?e[o]:a)}return s}function createAssigner(e){return baseRest((function(t,s){var r=-1,n=s.length,i=n>1?s[n-1]:undefined,o=n>2?s[2]:undefined;i=e.length>3&&typeof i=="function"?(n--,i):undefined;if(o&&isIterateeCall(s[0],s[1],o)){i=n<3?undefined:i;n=1}t=Object(t);while(++r<n){var a=s[r];if(a){e(t,a,r,i)}}return t}))}function isIndex(e,s){s=s==null?t:s;return!!s&&(typeof e=="number"||i.test(e))&&(e>-1&&e%1==0&&e<s)}function isIterateeCall(e,t,s){if(!isObject(s)){return false}var r=typeof t;if(r=="number"?isArrayLike(s)&&isIndex(t,s.length):r=="string"&&t in s){return eq(s[t],e)}return false}function isPrototype(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||o;return e===s}function nativeKeysIn(e){var t=[];if(e!=null){for(var s in Object(e)){t.push(s)}}return t}function eq(e,t){return e===t||e!==e&&t!==t}function isArguments(e){return isArrayLikeObject(e)&&a.call(e,"callee")&&(!c.call(e,"callee")||l.call(e)==s)}var f=Array.isArray;function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?l.call(e):"";return t==r||t==n}function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=t}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}var h=createAssigner((function(e,t,s,r){copyObject(t,keysIn(t),e,r)}));var p=baseRest((function(e){e.push(undefined,assignInDefaults);return apply(h,undefined,e)}));function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,true):baseKeysIn(e)}e.exports=p},718:e=>{var t=9007199254740991;var s="[object Arguments]",r="[object Function]",n="[object GeneratorFunction]";var i=Object.prototype;var o=i.hasOwnProperty;var a=i.toString;var l=i.propertyIsEnumerable;function isArguments(e){return isArrayLikeObject(e)&&o.call(e,"callee")&&(!l.call(e,"callee")||a.call(e)==s)}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?a.call(e):"";return t==r||t==n}function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=t}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}e.exports=isArguments},2769:e=>{var t=1e3;var s=t*60;var r=s*60;var n=r*24;var i=n*7;var o=n*365.25;e.exports=function(e,t){t=t||{};var s=typeof e;if(s==="string"&&e.length>0){return parse(e)}else if(s==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var l=parseFloat(a[1]);var c=(a[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*s;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return undefined}}function fmtShort(e){var i=Math.abs(e);if(i>=n){return Math.round(e/n)+"d"}if(i>=r){return Math.round(e/r)+"h"}if(i>=s){return Math.round(e/s)+"m"}if(i>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var i=Math.abs(e);if(i>=n){return plural(e,i,n,"day")}if(i>=r){return plural(e,i,r,"hour")}if(i>=s){return plural(e,i,s,"minute")}if(i>=t){return plural(e,i,t,"second")}return e+" ms"}function plural(e,t,s,r){var n=t>=s*1.5;return Math.round(e/s)+" "+r+(n?"s":"")}},8395:(e,t,s)=>{"use strict";const r=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?s(191):s(7124);e.exports=r},7124:(e,t,s)=>{"use strict";const r=s(9491);class RedisError extends Error{get name(){return this.constructor.name}}class ParserError extends RedisError{constructor(e,t,s){r(t);r.strictEqual(typeof s,"number");const n=Error.stackTraceLimit;Error.stackTraceLimit=2;super(e);Error.stackTraceLimit=n;this.offset=s;this.buffer=t}get name(){return this.constructor.name}}class ReplyError extends RedisError{constructor(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=2;super(e);Error.stackTraceLimit=t}get name(){return this.constructor.name}}class AbortError extends RedisError{get name(){return this.constructor.name}}class InterruptError extends AbortError{get name(){return this.constructor.name}}e.exports={RedisError:RedisError,ParserError:ParserError,ReplyError:ReplyError,AbortError:AbortError,InterruptError:InterruptError}},191:(e,t,s)=>{"use strict";const r=s(9491);const n=s(3837);function RedisError(e){Object.defineProperty(this,"message",{value:e||"",configurable:true,writable:true});Error.captureStackTrace(this,this.constructor)}n.inherits(RedisError,Error);Object.defineProperty(RedisError.prototype,"name",{value:"RedisError",configurable:true,writable:true});function ParserError(e,t,s){r(t);r.strictEqual(typeof s,"number");Object.defineProperty(this,"message",{value:e||"",configurable:true,writable:true});const n=Error.stackTraceLimit;Error.stackTraceLimit=2;Error.captureStackTrace(this,this.constructor);Error.stackTraceLimit=n;this.offset=s;this.buffer=t}n.inherits(ParserError,RedisError);Object.defineProperty(ParserError.prototype,"name",{value:"ParserError",configurable:true,writable:true});function ReplyError(e){Object.defineProperty(this,"message",{value:e||"",configurable:true,writable:true});const t=Error.stackTraceLimit;Error.stackTraceLimit=2;Error.captureStackTrace(this,this.constructor);Error.stackTraceLimit=t}n.inherits(ReplyError,RedisError);Object.defineProperty(ReplyError.prototype,"name",{value:"ReplyError",configurable:true,writable:true});function AbortError(e){Object.defineProperty(this,"message",{value:e||"",configurable:true,writable:true});Error.captureStackTrace(this,this.constructor)}n.inherits(AbortError,RedisError);Object.defineProperty(AbortError.prototype,"name",{value:"AbortError",configurable:true,writable:true});function InterruptError(e){Object.defineProperty(this,"message",{value:e||"",configurable:true,writable:true});Error.captureStackTrace(this,this.constructor)}n.inherits(InterruptError,AbortError);Object.defineProperty(InterruptError.prototype,"name",{value:"InterruptError",configurable:true,writable:true});e.exports={RedisError:RedisError,ParserError:ParserError,ReplyError:ReplyError,AbortError:AbortError,InterruptError:InterruptError}},419:(e,t,s)=>{"use strict";e.exports=s(5977)},5977:(e,t,s)=>{"use strict";const r=s(4300).Buffer;const n=s(1576).StringDecoder;const i=new n;const o=s(8395);const a=o.ReplyError;const l=o.ParserError;var c=r.allocUnsafe(32*1024);var u=0;var f=null;var h=0;var p=0;function parseSimpleNumbers(e){const t=e.buffer.length-1;var s=e.offset;var r=0;var n=1;if(e.buffer[s]===45){n=-1;s++}while(s<t){const t=e.buffer[s++];if(t===13){e.offset=s+1;return n*r}r=r*10+(t-48)}}function parseStringNumbers(e){const t=e.buffer.length-1;var s=e.offset;var r=0;var n="";if(e.buffer[s]===45){n+="-";s++}while(s<t){var i=e.buffer[s++];if(i===13){e.offset=s+1;if(r!==0){n+=r}return n}else if(r>429496728){n+=r*10+(i-48);r=0}else if(i===48&&r===0){n+=0}else{r=r*10+(i-48)}}}function parseSimpleString(e){const t=e.offset;const s=e.buffer;const r=s.length-1;var n=t;while(n<r){if(s[n++]===13){e.offset=n+1;if(e.optionReturnBuffers===true){return e.buffer.slice(t,n-1)}return e.buffer.toString("utf8",t,n-1)}}}function parseLength(e){const t=e.buffer.length-1;var s=e.offset;var r=0;while(s<t){const t=e.buffer[s++];if(t===13){e.offset=s+1;return r}r=r*10+(t-48)}}function parseInteger(e){if(e.optionStringNumbers===true){return parseStringNumbers(e)}return parseSimpleNumbers(e)}function parseBulkString(e){const t=parseLength(e);if(t===undefined){return}if(t<0){return null}const s=e.offset+t;if(s+2>e.buffer.length){e.bigStrSize=s+2;e.totalChunkSize=e.buffer.length;e.bufferCache.push(e.buffer);return}const r=e.offset;e.offset=s+2;if(e.optionReturnBuffers===true){return e.buffer.slice(r,s)}return e.buffer.toString("utf8",r,s)}function parseError(e){var t=parseSimpleString(e);if(t!==undefined){if(e.optionReturnBuffers===true){t=t.toString()}return new a(t)}}function handleError(e,t){const s=new l("Protocol error, got "+JSON.stringify(String.fromCharCode(t))+" as reply type byte",JSON.stringify(e.buffer),e.offset);e.buffer=null;e.returnFatalError(s)}function parseArray(e){const t=parseLength(e);if(t===undefined){return}if(t<0){return null}const s=new Array(t);return parseArrayElements(e,s,0)}function pushArrayCache(e,t,s){e.arrayCache.push(t);e.arrayPos.push(s)}function parseArrayChunks(e){const t=e.arrayCache.pop();var s=e.arrayPos.pop();if(e.arrayCache.length){const r=parseArrayChunks(e);if(r===undefined){pushArrayCache(e,t,s);return}t[s++]=r}return parseArrayElements(e,t,s)}function parseArrayElements(e,t,s){const r=e.buffer.length;while(s<t.length){const n=e.offset;if(e.offset>=r){pushArrayCache(e,t,s);return}const i=parseType(e,e.buffer[e.offset++]);if(i===undefined){if(!(e.arrayCache.length||e.bufferCache.length)){e.offset=n}pushArrayCache(e,t,s);return}t[s]=i;s++}return t}function parseType(e,t){switch(t){case 36:return parseBulkString(e);case 43:return parseSimpleString(e);case 42:return parseArray(e);case 58:return parseInteger(e);case 45:return parseError(e);default:return handleError(e,t)}}function decreaseBufferPool(){if(c.length>50*1024){if(h===1||p>h*2){const e=Math.floor(c.length/10);const t=e<u?u:e;u=0;c=c.slice(t,c.length)}else{p++;h--}}else{clearInterval(f);h=0;p=0;f=null}}function resizeBuffer(e){if(c.length<e+u){const t=e>1024*1024*75?2:3;if(u>1024*1024*111){u=1024*1024*50}c=r.allocUnsafe(e*t+u);u=0;h++;if(f===null){f=setInterval(decreaseBufferPool,50)}}}function concatBulkString(e){const t=e.bufferCache;const s=e.offset;var r=t.length;var n=e.bigStrSize-e.totalChunkSize;e.offset=n;if(n<=2){if(r===2){return t[0].toString("utf8",s,t[0].length+n-2)}r--;n=t[t.length-2].length+n}var o=i.write(t[0].slice(s));for(var a=1;a<r-1;a++){o+=i.write(t[a])}o+=i.end(t[a].slice(0,n-2));return o}function concatBulkBuffer(e){const t=e.bufferCache;const s=e.offset;const r=e.bigStrSize-s-2;var n=t.length;var i=e.bigStrSize-e.totalChunkSize;e.offset=i;if(i<=2){if(n===2){return t[0].slice(s,t[0].length+i-2)}n--;i=t[t.length-2].length+i}resizeBuffer(r);const o=u;t[0].copy(c,o,s,t[0].length);u+=t[0].length-s;for(var a=1;a<n-1;a++){t[a].copy(c,u);u+=t[a].length}t[a].copy(c,u,0,i-2);u+=i-2;return c.slice(o,u)}class JavascriptRedisParser{constructor(e){if(!e){throw new TypeError("Options are mandatory.")}if(typeof e.returnError!=="function"||typeof e.returnReply!=="function"){throw new TypeError("The returnReply and returnError options have to be functions.")}this.setReturnBuffers(!!e.returnBuffers);this.setStringNumbers(!!e.stringNumbers);this.returnError=e.returnError;this.returnFatalError=e.returnFatalError||e.returnError;this.returnReply=e.returnReply;this.reset()}reset(){this.offset=0;this.buffer=null;this.bigStrSize=0;this.totalChunkSize=0;this.bufferCache=[];this.arrayCache=[];this.arrayPos=[]}setReturnBuffers(e){if(typeof e!=="boolean"){throw new TypeError("The returnBuffers argument has to be a boolean")}this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!=="boolean"){throw new TypeError("The stringNumbers argument has to be a boolean")}this.optionStringNumbers=e}execute(e){if(this.buffer===null){this.buffer=e;this.offset=0}else if(this.bigStrSize===0){const t=this.buffer.length;const s=t-this.offset;const n=r.allocUnsafe(s+e.length);this.buffer.copy(n,0,this.offset,t);e.copy(n,s,0,e.length);this.buffer=n;this.offset=0;if(this.arrayCache.length){const e=parseArrayChunks(this);if(e===undefined){return}this.returnReply(e)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var t=this.optionReturnBuffers?concatBulkBuffer(this):concatBulkString(this);this.bigStrSize=0;this.bufferCache=[];this.buffer=e;if(this.arrayCache.length){this.arrayCache[0][this.arrayPos[0]++]=t;t=parseArrayChunks(this);if(t===undefined){return}}this.returnReply(t)}else{this.bufferCache.push(e);this.totalChunkSize+=e.length;return}while(this.offset<this.buffer.length){const e=this.offset;const t=this.buffer[this.offset++];const s=parseType(this,t);if(s===undefined){if(!(this.arrayCache.length||this.bufferCache.length)){this.offset=e}return}if(t===45){this.returnError(s)}else{this.returnReply(s)}}this.buffer=null}}e.exports=JavascriptRedisParser},3986:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=s(1365);function throwLater(e){setTimeout((function(){throw e}),0)}function asCallback(e,t,s){if(typeof t==="function"){e.then((e=>{let n;if(s!==undefined&&Object(s).spread&&Array.isArray(e)){n=r.tryCatch(t).apply(undefined,[null].concat(e))}else{n=e===undefined?r.tryCatch(t)(null):r.tryCatch(t)(null,e)}if(n===r.errorObj){throwLater(n.e)}}),(e=>{if(!e){const t=new Error(e+"");Object.assign(t,{cause:e});e=t}const s=r.tryCatch(t)(e);if(s===r.errorObj){throwLater(s.e)}}))}return e}t["default"]=asCallback},1365:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryCatch=t.errorObj=void 0;t.errorObj={e:{}};let s;function tryCatcher(e,r){try{const e=s;s=null;return e.apply(this,arguments)}catch(e){t.errorObj.e=e;return t.errorObj}}function tryCatch(e){s=e;return tryCatcher}t.tryCatch=tryCatch},8134:module=>{module.exports=eval("require")("supports-color")},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},1808:e=>{"use strict";e.exports=require("net")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},5904:e=>{"use strict";e.exports=JSON.parse('{"acl":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"append":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"asking":{"arity":1,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"auth":{"arity":-2,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"bgrewriteaof":{"arity":1,"flags":["admin","noscript","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"bgsave":{"arity":-1,"flags":["admin","noscript","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"bitcount":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"bitfield":{"arity":-2,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"bitfield_ro":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"bitop":{"arity":-4,"flags":["write","denyoom"],"keyStart":2,"keyStop":-1,"step":1},"bitpos":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"blmove":{"arity":6,"flags":["write","denyoom","noscript","blocking"],"keyStart":1,"keyStop":2,"step":1},"blmpop":{"arity":-5,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"blpop":{"arity":-3,"flags":["write","noscript","blocking"],"keyStart":1,"keyStop":-2,"step":1},"brpop":{"arity":-3,"flags":["write","noscript","blocking"],"keyStart":1,"keyStop":-2,"step":1},"brpoplpush":{"arity":4,"flags":["write","denyoom","noscript","blocking"],"keyStart":1,"keyStop":2,"step":1},"bzmpop":{"arity":-5,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"bzpopmax":{"arity":-3,"flags":["write","noscript","blocking","fast"],"keyStart":1,"keyStop":-2,"step":1},"bzpopmin":{"arity":-3,"flags":["write","noscript","blocking","fast"],"keyStart":1,"keyStop":-2,"step":1},"client":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"cluster":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"command":{"arity":-1,"flags":["loading","stale"],"keyStart":0,"keyStop":0,"step":0},"config":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"copy":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"dbsize":{"arity":1,"flags":["readonly","fast"],"keyStart":0,"keyStop":0,"step":0},"debug":{"arity":-2,"flags":["admin","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"decr":{"arity":2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"decrby":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"del":{"arity":-2,"flags":["write"],"keyStart":1,"keyStop":-1,"step":1},"discard":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"dump":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"echo":{"arity":2,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"eval":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"eval_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"evalsha":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"evalsha_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"exec":{"arity":1,"flags":["noscript","loading","stale","skip_slowlog"],"keyStart":0,"keyStop":0,"step":0},"exists":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"expire":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"expireat":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"expiretime":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"failover":{"arity":-1,"flags":["admin","noscript","stale"],"keyStart":0,"keyStop":0,"step":0},"fcall":{"arity":-3,"flags":["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"fcall_ro":{"arity":-3,"flags":["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"flushall":{"arity":-1,"flags":["write"],"keyStart":0,"keyStop":0,"step":0},"flushdb":{"arity":-1,"flags":["write"],"keyStart":0,"keyStop":0,"step":0},"function":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"geoadd":{"arity":-5,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"geodist":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geohash":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geopos":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"georadius":{"arity":-6,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"georadius_ro":{"arity":-6,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"georadiusbymember":{"arity":-5,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"georadiusbymember_ro":{"arity":-5,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geosearch":{"arity":-7,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"geosearchstore":{"arity":-8,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"get":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"getbit":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"getdel":{"arity":2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"getex":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"getrange":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"getset":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hdel":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"hello":{"arity":-1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"hexists":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hget":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hgetall":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hincrby":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hincrbyfloat":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hkeys":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hmget":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hmset":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hrandfield":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"hset":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hsetnx":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"hstrlen":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"hvals":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"incr":{"arity":2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"incrby":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"incrbyfloat":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"info":{"arity":-1,"flags":["loading","stale"],"keyStart":0,"keyStop":0,"step":0},"keys":{"arity":2,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"lastsave":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"latency":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"lcs":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":2,"step":1},"lindex":{"arity":3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"linsert":{"arity":5,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"llen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"lmove":{"arity":5,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"lmpop":{"arity":-4,"flags":["write","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"lolwut":{"arity":-1,"flags":["readonly","fast"],"keyStart":0,"keyStop":0,"step":0},"lpop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"lpos":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"lpush":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"lpushx":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"lrange":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"lrem":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"lset":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"ltrim":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"memory":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"mget":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"migrate":{"arity":-6,"flags":["write","movablekeys"],"keyStart":3,"keyStop":3,"step":1},"module":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"monitor":{"arity":1,"flags":["admin","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"move":{"arity":3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"mset":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":2},"msetnx":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":2},"multi":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"object":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"persist":{"arity":2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpire":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpireat":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"pexpiretime":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"pfadd":{"arity":-2,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"pfcount":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"pfdebug":{"arity":3,"flags":["write","denyoom","admin"],"keyStart":2,"keyStop":2,"step":1},"pfmerge":{"arity":-2,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"pfselftest":{"arity":1,"flags":["admin"],"keyStart":0,"keyStop":0,"step":0},"ping":{"arity":-1,"flags":["fast"],"keyStart":0,"keyStop":0,"step":0},"psetex":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"psubscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"psync":{"arity":-3,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"pttl":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"publish":{"arity":3,"flags":["pubsub","loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"pubsub":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"punsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"quit":{"arity":-1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"randomkey":{"arity":1,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"readonly":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"readwrite":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"rename":{"arity":3,"flags":["write"],"keyStart":1,"keyStop":2,"step":1},"renamenx":{"arity":3,"flags":["write","fast"],"keyStart":1,"keyStop":2,"step":1},"replconf":{"arity":-1,"flags":["admin","noscript","loading","stale","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"replicaof":{"arity":3,"flags":["admin","noscript","stale","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"reset":{"arity":1,"flags":["noscript","loading","stale","fast","no_auth","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"restore":{"arity":-4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"restore-asking":{"arity":-4,"flags":["write","denyoom","asking"],"keyStart":1,"keyStop":1,"step":1},"role":{"arity":1,"flags":["noscript","loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"rpop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"rpoplpush":{"arity":3,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"rpush":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"rpushx":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"sadd":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"save":{"arity":1,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"scan":{"arity":-2,"flags":["readonly"],"keyStart":0,"keyStop":0,"step":0},"scard":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"script":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"sdiff":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sdiffstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"select":{"arity":2,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"set":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setbit":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setex":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"setnx":{"arity":3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"setrange":{"arity":4,"flags":["write","denyoom"],"keyStart":1,"keyStop":1,"step":1},"shutdown":{"arity":-1,"flags":["admin","noscript","loading","stale","no_multi","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"sinter":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sintercard":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"sinterstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"sismember":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"slaveof":{"arity":3,"flags":["admin","noscript","stale","no_async_loading"],"keyStart":0,"keyStop":0,"step":0},"slowlog":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"smembers":{"arity":2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"smismember":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"smove":{"arity":4,"flags":["write","fast"],"keyStart":1,"keyStop":2,"step":1},"sort":{"arity":-2,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"sort_ro":{"arity":-2,"flags":["readonly","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"spop":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"spublish":{"arity":3,"flags":["pubsub","loading","stale","fast"],"keyStart":1,"keyStop":1,"step":1},"srandmember":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"srem":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"sscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"ssubscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":1,"keyStop":-1,"step":1},"strlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"subscribe":{"arity":-2,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"substr":{"arity":4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"sunion":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":-1,"step":1},"sunionstore":{"arity":-3,"flags":["write","denyoom"],"keyStart":1,"keyStop":-1,"step":1},"sunsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":1,"keyStop":-1,"step":1},"swapdb":{"arity":3,"flags":["write","fast"],"keyStart":0,"keyStop":0,"step":0},"sync":{"arity":1,"flags":["admin","noscript","no_async_loading","no_multi"],"keyStart":0,"keyStop":0,"step":0},"time":{"arity":1,"flags":["loading","stale","fast"],"keyStart":0,"keyStop":0,"step":0},"touch":{"arity":-2,"flags":["readonly","fast"],"keyStart":1,"keyStop":-1,"step":1},"ttl":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"type":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"unlink":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":-1,"step":1},"unsubscribe":{"arity":-1,"flags":["pubsub","noscript","loading","stale"],"keyStart":0,"keyStop":0,"step":0},"unwatch":{"arity":1,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":0,"keyStop":0,"step":0},"wait":{"arity":3,"flags":["noscript"],"keyStart":0,"keyStop":0,"step":0},"watch":{"arity":-2,"flags":["noscript","loading","stale","fast","allow_busy"],"keyStart":1,"keyStop":-1,"step":1},"xack":{"arity":-4,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xadd":{"arity":-5,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"xautoclaim":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xclaim":{"arity":-6,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xdel":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"xgroup":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"xinfo":{"arity":-2,"flags":[],"keyStart":0,"keyStop":0,"step":0},"xlen":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"xpending":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xread":{"arity":-4,"flags":["readonly","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"xreadgroup":{"arity":-7,"flags":["write","blocking","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"xrevrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"xsetid":{"arity":-3,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"xtrim":{"arity":-4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zadd":{"arity":-4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"zcard":{"arity":2,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zcount":{"arity":4,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zdiff":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zdiffstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"zincrby":{"arity":4,"flags":["write","denyoom","fast"],"keyStart":1,"keyStop":1,"step":1},"zinter":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zintercard":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zinterstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1},"zlexcount":{"arity":4,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zmpop":{"arity":-4,"flags":["write","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zmscore":{"arity":-3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zpopmax":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zpopmin":{"arity":-2,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zrandmember":{"arity":-2,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangebylex":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangebyscore":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrangestore":{"arity":-5,"flags":["write","denyoom"],"keyStart":1,"keyStop":2,"step":1},"zrank":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zrem":{"arity":-3,"flags":["write","fast"],"keyStart":1,"keyStop":1,"step":1},"zremrangebylex":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zremrangebyrank":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zremrangebyscore":{"arity":4,"flags":["write"],"keyStart":1,"keyStop":1,"step":1},"zrevrange":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrangebylex":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrangebyscore":{"arity":-4,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zrevrank":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zscan":{"arity":-3,"flags":["readonly"],"keyStart":1,"keyStop":1,"step":1},"zscore":{"arity":3,"flags":["readonly","fast"],"keyStart":1,"keyStop":1,"step":1},"zunion":{"arity":-3,"flags":["readonly","movablekeys"],"keyStart":0,"keyStop":0,"step":0},"zunionstore":{"arity":-4,"flags":["write","denyoom","movablekeys"],"keyStart":1,"keyStop":1,"step":1}}')}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var s=__webpack_module_cache__[e]={exports:{}};var r=true;try{__webpack_modules__[e].call(s.exports,s,s.exports,__nccwpck_require__);r=false}finally{if(r)delete __webpack_module_cache__[e]}return s.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__=__nccwpck_require__(9597);module.exports=__webpack_exports__})();